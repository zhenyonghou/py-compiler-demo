"use strict";var e;function t(e,t){if(void 0===t&&(t="Assertion failed"),!e)throw new Error(t)}function n(e){return null==e?null:JSON.parse(JSON.stringify(e))}!function(e){e[e.Id=0]="Id",e[e.Op=1]="Op",e[e.Keyword=2]="Keyword",e[e.Number=3]="Number",e[e.String=4]="String",e[e.NewLine=5]="NewLine",e[e.Indent=6]="Indent",e[e.Dedent=7]="Dedent",e[e.Comment=8]="Comment",e[e.EOF=9]="EOF",e[e.Error=10]="Error"}(e||(e={}));var r={False:!0,None:!0,True:!0,and:!0,as:!0,assert:!0,async:!0,await:!0,break:!0,class:!0,continue:!0,def:!0,del:!0,elif:!0,else:!0,except:!0,finally:!0,for:!0,from:!0,global:!0,if:!0,import:!0,in:!0,is:!0,lambda:!0,nonlocal:!0,not:!0,or:!0,pass:!0,raise:!0,return:!0,try:!0,while:!0,with:!0,yield:!0,match:!0,case:!0},o={"%":"Mod","&":"BitAnd","*":"Mult","**":"Pow","+":"Add","-":"Sub","/":"Div","//":"FloorDiv","<<":"LShift",">>":"RShift","@":"MatMult","^":"BitXor","|":"BitOr"},u={"!":"Bang","!=":"NotEq","(":"LParen",")":"RParen",",":"Comma","->":"Arrow",".":"Dot",":":"Colon",":=":"Walrus",";":"Semicolon","<":"Lt","<=":"LtE","=":"Assign","==":"Eq",">":"Gt",">=":"GtE","[":"LSquare","]":"RSquare","{":"LBracket","}":"RBracket","~":"Invert"};function c(e){return e>=65&&e<=90||e>=97&&e<=122||95===e}function a(e){return e>=48&&e<=57}function p(e){return 32===e||9===e}function i(e){return 10===e||13===e}var l,m=function(){for(var e=n(u),t=0,r=Object.keys(o);t<r.length;t++){var c=r[t];e[c]=o[c],e[c+"="]=o[c]+"Assign"}return e}(),s=function(e,t){void 0===t&&(t=!1),e.pos++,t?(e.line++,e.col=0):e.col++};!function(e){e[e.Lexical=0]="Lexical",e[e.Syntactical=1]="Syntactical",e[e.Semantical=2]="Semantical",e[e.Logical=3]="Logical"}(l||(l={}));var f=new(function(){function e(){this.errors=[[],[],[],[]]}return e.prototype.add=function(e,t,n){var r="";n.line>0&&(r=", 在".concat(n.line,"行"),n.column>0&&(r+="".concat(n.column,"列")),r+="附近");var o={type:e,msg:t+=r,pos:n};this.errors[o.type].push(o)},e.prototype.addLex=function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=-1),this.add(l.Lexical,e,{line:t,column:n})},e.prototype.addSyntax=function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=-1),this.add(l.Syntactical,e,{line:t,column:n})},e.prototype.addSemantic=function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=-1),this.add(l.Semantical,e,{line:t,column:n})},e.prototype.isEmpty=function(){return this.empty(l.Lexical)&&this.empty(l.Syntactical)&&this.empty(l.Semantical)&&this.empty(l.Logical)},e.prototype.clear=function(){this.errors.forEach((function(e){return e.length=0}))},e.prototype.flatten=function(){var e=[];return this.errors.forEach((function(t){t.forEach((function(t){return e.push(t)}))})),e},e.prototype.stringify=function(){var e=this,t=[];return this.errors.forEach((function(n){n.forEach((function(n){var r=e.getErrorLiterally(n.type),o="".concat(r,", ").concat(n.msg,", 在").concat(n.pos.line,"行").concat(n.pos.column,"列附近。");t.push(o)}))})),t},e.prototype.empty=function(e){return 0==this.errors[e].length},e.prototype.getErrorLiterally=function(e){var t="";switch(e){case l.Lexical:t="词法错误";break;case l.Syntactical:t="语法错误";break;case l.Semantical:t="语义错误";break;case l.Logical:t="逻辑错误"}return t},e}());function y(t){for(var n,o=t.curPos;c(n=t.source.charCodeAt(o.pos))||n>=48&&n<=57;)s(o);var u=t.source.slice(t.startPos.pos,o.pos);r.hasOwnProperty(u)?t.addToken(e.Keyword,u):t.addToken(e.Id,u)}var d,h={b:/^[_0-1]$/,B:/^[_0-1]$/,o:/^[_0-7]$/,O:/^[_0-7]$/,x:/^[_0-9a-fA-F]$/,X:/^[_0-9a-fA-F]$/},x={b:2,B:2,o:8,O:8,x:16,X:16};function v(t){var n=t.curPos,r=t.source[n.pos],o=t.source[n.pos+1],u="";if("0"==r&&h[o]){s(n),s(n);for(var c=h[o];c.test(t.source[n.pos]);)u+=t.source[n.pos],s(n);if(u){var p=parseInt(u,x[o]);isNaN(p)?t.invalidToken("数字格式错误"):t.addToken(e.Number,r+o+u,p)}else t.invalidToken("数字格式错误:".concat(u))}else{for(var i=!1,l=!1,m=!1;;){var f=t.source.charCodeAt(n.pos);if(!m||43!=f&&45!=f)if(m=!1,a(f));else if(l||i||46!=f){if(l||69!=f&&101!=f)break;l=!0,m=!0}else i=!0;else;u+=String.fromCharCode(f),s(n)}if(!i&&!l&&"0"==r&&u.length>1&&!/^0+/.test(u))t.invalidToken("数字格式错误");else{p=parseFloat(u);isNaN(p)?t.invalidToken("数字格式错误"):t.addToken(e.Number,u,p)}}}function A(t){!function(t,n){var r=t.curPos,o=t.source.charCodeAt(r.pos);s(r);var u=!1;t.source.charCodeAt(r.pos)==o&&t.source.charCodeAt(r.pos+1)==o&&(s(r),s(r),u=!0);var c=n.toLowerCase().indexOf("r")>=0,a="";for(;;){var p=t.source.charCodeAt(r.pos);if(s(r),p==o){if(!u)break;if(t.source.charCodeAt(r.pos)==o&&t.source.charCodeAt(r.pos+1)==o){s(r),s(r);break}"\\"+String.fromCharCode(o),a+=String.fromCharCode(o)}else if(92==p){var l=t.source.charCodeAt(r.pos);if(s(r),13==l&&10==t.source.charCodeAt(r.pos)&&(l=10),34==l||39==l||92==l)c&&("\\",a+="\\"),"\\"+String.fromCharCode(l),a+=String.fromCharCode(l);else if(!c&&w(l))"\\"+String.fromCharCode(l),a+=String.fromCharCode(w(l));else if(i(l))c&&(a+="\\"+String.fromCharCode(l),"\\\\",10==l?"\\n":"\\u"+g(l));else if(c||48!=l)if(c||117!=l&&120!=l)"\\\\"+String.fromCharCode(l),a+="\\"+String.fromCharCode(l);else{var m=117==l?4:2,f=t.source.slice(r.pos,r.pos+m);r.pos+=m,r.col+=m;var y=parseInt(f,16);isNaN(y)&&t.invalidToken("invalid unicode or hex escape"),"\\"+String.fromCharCode(l)+f,a+=String.fromCharCode(y)}else"\\\\x00",a+="\0"}else{if(isNaN(p)){t.invalidToken("字符串意外终止");break}if(i(p)&&!u){t.invalidToken("字符串中意外换行");break}a+=String.fromCharCode(p),String.fromCharCode(p)}}t.addToken(e.String,a)}(t,"")}function w(e){switch(e){case 97:return 7;case 98:return 8;case 102:return 12;case 110:return 10;case 114:return 13;case 116:return 9;case 118:return 11;default:return 0}}function g(e){return("0000"+e.toString(16)).slice(-4)}function b(e){for(var t=e.curPos;t.pos<e.source.length&&!i(e.source.charCodeAt(t.pos));)s(t)}function O(e){var t=e.curPos;s(t);var n=e.source.charCodeAt(t.pos);i(n)?(s(t,!0),13==n&&10==e.source.charCodeAt(t.pos)&&t.pos++):(e.invalidToken("'\\'符号后出现非法字符"),s(t))}function _(n){var r=n.curPos;a(n.source.charCodeAt(r.pos+1))?v(n):(n.addToken(e.Op,"Dot"),s(r)),t(n.startPos.pos!=n.curPos.pos,"parseDot")}function k(t){for(var r=t.curPos,o=n(r),u=0;;){var c=t.source.charCodeAt(r.pos);if(9!=c&&32!=c)break;u+=9==c?4:1,s(r)}u>0&&(t.startPos=o,t.addToken(e.Indent,""+u))}function C(t){var n=t.curPos,r=t.source.charCodeAt(n.pos);s(n,!0);var o=t.source.charCodeAt(n.pos);13==r&&10==o&&n.pos++,function(t){t.addToken(e.NewLine,""),k(t)}(t)}function L(e){var n=e.curPos;0==n.pos?k(e):s(n),t(n.pos!=e.startPos.pos,"parseSpace")}function S(e){var t=e.curPos,n=e.source.charAt(t.pos);e.invalidToken("输入有错误:'".concat(n,"'")),s(t)}function R(e){return W(String.fromCharCode(e))}function W(e){return m.hasOwnProperty(e)}function M(e){var n=e.curPos,r=e.source.charAt(n.pos);t(W(r),"parseOp");for(var o=!1,u=m[r],c=0,a=Object.keys(m);c<a.length;c++){var p=a[c];p!=r&&p.startsWith(r)&&(o=!0)}s(n),o?function(e,t){var n=e.startPos,r=e.curPos,o=e.source.slice(n.pos,r.pos+1);if(2==o.length&&W(o)){var u=e.source.slice(n.pos,r.pos+2);3==u.length&&W(u)?(t=m[u],s(r),s(r)):(t=m[o],s(r))}T(e,t)}(e,u):T(e,u)}function T(t,n){t.addToken(e.Op,n)}!function(e){e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error"}(d||(d={}));var E=d.Warn,P=function(){function e(){}return e.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];E<=d.Debug&&console.debug.apply(console,e)},e.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];E<=d.Info&&console.info.apply(console,e)},e.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];E<=d.Warn&&console.warn.apply(console,e)},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];E<=d.Error&&console.error.apply(console,e)},e}();function K(e){return 0==e.length?null:e[e.length-1]}var j,F=function(){function e(){}return e.Do=function(e){return 0==e.length?[]:(e=N(e),P.debug("tokens0:",e),e=D(e),P.debug("tokens1:",e),e=I(e))},e}(),N=function(t){for(var n=[],r=0;r<t.length;){var o=K(n),u=t[r],c=null;if(r+1<t.length&&(c=t[r+1]),u.type==e.Indent)c.type==e.NewLine||c.type==e.EOF||n.push(u);else if(u.type==e.NewLine)o&&o.type!=e.NewLine&&n.push(u);else if(u.type==e.EOF){if(o&&o.type!=e.NewLine){var a=B(e.NewLine,"",K(n));n.push(a)}n.push(u)}else n.push(u);r++}return n},D=function(t){for(var n=[0],r=[],o=0;o<t.length;){var u=t[o];if(u.type==e.Indent){var c=parseInt(u.value);if(c%4!=0){z(r,"缩进错误",u),o++;continue}var a=K(n);if(c>a){if(c-a>4){z(r,"代码缩进过多",u),o++;continue}r.push(u),n.push(c)}else c<a&&q(n,c,r)}else if(u.type==e.NewLine)r.push(u);else if(u.type==e.EOF)q(n,0,r),r.push(u);else{var p=o-1>=0?t[o-1]:null;p&&p.type==e.NewLine&&q(n,0,r),r.push(u)}o++}return r},I=function(t){for(var n=[],r=0,o=[],u=[],c=[];r<t.length;){var a=t[r];switch(a.type){case e.Op:switch(a.value){case"LBracket":o.push(a);break;case"RBracket":o.length>0?o.pop():z(n,"缺少符号'{'与之对应",a);break;case"LSquare":u.push(a);break;case"RSquare":u.length>0?u.pop():z(n,"缺少符号'['与之对应",a);break;case"LParen":c.push(a);break;case"RParen":c.length>0?c.pop():z(n,"缺少符号'('与之对应",a)}break;case e.Indent:case e.Dedent:case e.NewLine:if(o.length>0||u.length>0||c.length>0){r++;continue}}n.push(a),r++}if(o.length>0){var p=K(o);z(n,"缺少符号'}'与之对应",p)}if(u.length>0){p=K(u);z(n,"缺少符号']'与之对应",p)}if(c.length>0){p=K(c);z(n,"缺少符号')'与之对应",p)}return n},B=function(t,n,r){var o={type:t,value:n,startPos:r.startPos,endPos:r.endPos,lineno:r.lineno,end_lineno:r.end_lineno,col_offset:r.col_offset,end_col_offset:r.end_col_offset};return r.type==e.NewLine&&(o.lineno+=1,o.end_lineno+=1,o.col_offset=0,o.end_col_offset=0),o},q=function(e,t,n){for(;;){var r=K(e);if(t>=r)break;G(n,""+r),e.pop()}},G=function(t,n){var r=B(e.Dedent,n,K(t));t.push(r)},z=function(t,r,o){var u=n(o);u.type=e.Error,u.value=r,t.push(u),f.add(l.Lexical,r,{line:o.lineno,column:o.col_offset})},U=function(){function r(){this.source="",this.slots=[],this.initSlots(),this.reset()}return r.prototype.initSlots=function(){for(var e=0;e<128;e++)c(e)?this.slots[e]=y:a(e)?this.slots[e]=v:34===e||39===e?this.slots[e]=A:35==e?this.slots[e]=b:92==e?this.slots[e]=O:46==e?this.slots[e]=_:p(e)?this.slots[e]=L:i(e)?this.slots[e]=C:R(e)?this.slots[e]=M:this.slots[e]=S},r.prototype.reset=function(){this.startPos={pos:0,line:1,col:0},this.curPos=n(this.startPos),this.res=[]},r.prototype.lex=function(r){if(this.source=r,P.debug("code:"),P.debug(this.source),this.reset(),0==this.source.length)return this.res;for(;this.curPos.pos<this.source.length;){this.startPos=n(this.curPos);var o=this.source.charCodeAt(this.curPos.pos);o<128?this.slots[o](this):(this.invalidToken("含有非法字符'".concat(this.source.charAt(this.curPos.pos),"'")),s(this.curPos)),t(this.startPos.pos!=this.curPos.pos,"lex处理完之后仍然curPos == startPos")}return this.addToken(e.EOF,""),P.debug("pre analyze tokens:",this.res),this.res=F.Do(this.res),P.debug("lexer res:",this.res),this.res},r.prototype.addToken=function(e,t,n){var r={type:e,value:t,startPos:this.startPos.pos,endPos:this.curPos.pos,lineno:this.startPos.line,end_lineno:this.curPos.line,col_offset:this.startPos.col,end_col_offset:this.curPos.col,auxValue:n};return this.res.push(r),r},r.prototype.invalidToken=function(t){this.addToken(e.Error,t),f.add(l.Lexical,t,{line:this.startPos.line,column:this.startPos.col})},r}(),V=function(e,t){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},V(e,t)};function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function H(e,t,n){if(n||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}!function(e){e.Module="Module",e.Expr="Expr",e.Constant="Constant",e.Name="Name",e.List="List",e.ListComp="ListComp",e.Dict="Dict",e.DictComp="DictComp",e.Set="Set",e.SetComp="SetComp",e.Tuple="Tuple",e.Slice="Slice",e.Assign="Assign",e.AugAssign="AugAssign",e.AnnAssign="AnnAssign",e.Compare="Compare",e.BinOp="BinOp",e.UnaryOp="UnaryOp",e.BoolOp="BoolOp",e.Subscript="Subscript",e.Attribute="Attribute",e.Call="Call",e.keyword="keyword",e.arguments="arguments",e.arg="arg",e.Delete="Delete",e.Starred="Starred",e.Global="Global",e.Nonlocal="Nonlocal",e.If="If",e.IfExp="IfExp",e.For="For",e.AsyncFor="AsyncFor",e.While="While",e.Continue="Continue",e.Break="Break",e.Pass="Pass",e.Return="Return",e.Await="Await",e.Yield="Yield",e.YieldFrom="YieldFrom",e.NamedExpr="NamedExpr",e.Import="Import",e.ImportFrom="ImportFrom",e.alias="alias",e.comprehension="comprehension",e.GeneratorExp="GeneratorExp",e.FunctionDef="FunctionDef",e.AsyncFunctionDef="AsyncFunctionDef",e.ClassDef="ClassDef",e.With="With",e.withitem="withitem",e.AsyncWith="AsyncWith",e.Try="Try",e.ExceptHandler="ExceptHandler",e.Raise="Raise",e.Assert="Assert",e.Match="Match",e.match_case="match_case",e.MatchValue="MatchValue",e.MatchAs="MatchAs",e.MatchSequence="MatchSequence",e.MatchSingleton="MatchSingleton",e.MatchOr="MatchOr",e.MatchStar="MatchStar",e.MatchMapping="MatchMapping",e.MatchClass="MatchClass",e.Lambda="Lambda",e.ModFormat="ModFormat",e.FunctionRun="FunctionRun",e.CreateInstance="CreateInstance"}(j||(j={}));var X,$=function(){function e(){this.p=0}return e.prototype.reset=function(e){this.input=e,this.p=0},e.prototype.next=function(){if(this.p>=this.input.length)throw new Error("已经到达EOF");return this.input[this.p++]},e}(),J=function(){function e(){this.tokenizer=null,this.tokenizer=new $,this.init([])}return e.prototype.init=function(e){this.tokenizer.reset(e),this.p=0,this.tokens=[]},e.prototype.clear=function(){this.init([])},e.prototype.index=function(){return this.p},e.prototype.reset=function(e){t(e<=this.tokens.length),this.p=e},e.prototype.LT=function(e){return this.sync(e),this.tokens[this.p+e-1]},e.prototype.consume=function(e){void 0===e&&(e=1),this.sync(e),this.p+=e},e.prototype.sync=function(e){if(this.p+e>=this.tokens.length){var t=this.p+e-this.tokens.length;this.fill(t)}},e.prototype.fill=function(e){for(var t=0;t<e;t++)this.tokens.push(this.tokenizer.next())},e}(),Z=function(){function e(){this.data=new Map}return e.prototype.init=function(){this.clearMemo()},e.prototype.set=function(e,t,n){var r=this.data.get(e);null==r&&(r=new Map),r.set(t,n),this.data.set(e,r)},e.prototype.get=function(e,t){var n=this.data.get(e);return n?n.get(t):null},e.prototype.clearMemo=function(){this.data.clear()},e}(),Q=function(){function e(){this.lookahead=null,this.memos=null,this.lookahead=new J,this.memos=new Z}return e.prototype.reset=function(){this.lookahead.clear(),this.memos.clearMemo()},e.prototype.consume=function(){var e=this.lookahead.LT(1);return this.lookahead.consume(),e},e.prototype.reportError=function(e){var t=K(this.lookahead.tokens);f.add(l.Syntactical,e,{line:t.lineno,column:t.col_offset})},e.prototype.log0=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];P.debug.apply(P,H(["%c".concat(this.lookahead.p),"color: #fbc82f;"],e,!1))},e.prototype.log1=function(e,t,n,r){var o=r?"#00FF00":"#777";P.debug("%c".concat(e,"-").concat(r?t:""," ").concat(n),"color: ".concat(o,";"))},e.prototype.log2=function(e,t){var n=this.lookahead.p,r=t?"#00FF00":"#777";P.debug("%c".concat(n," ").concat(e),"color: ".concat(r,";"))},e}(),ee=function(n){function r(){return n.call(this)||this}return Y(r,n),r.prototype.memo=function(e,n){var r=null,o=this.lookahead.index(),u=this.memos.get(o,e.name);if(u)this.lookahead.reset(u.pos),(r=u.val)&&this.fillLineno(r,o,u.pos-1);else{r=e.func(this);var c=this.lookahead.index();t(r?c>o:c==o),this.memos.set(o,e.name,{pos:c,val:r}),n&&this.fillLineno(r,o,c-1)}return r},r.prototype.memoAny=function(e){var n=null,r=this.lookahead.index(),o=this.memos.get(r,e.name);if(o)this.lookahead.reset(o.pos),n=o.val;else{n=e.func(this);var u=this.lookahead.index();t(n?u>r:u==r),this.memos.set(r,e.name,{pos:u,val:n}),this.log1(r,u,e.name,!!n)}return n},r.prototype.memoLeftRec=function(e){var t=null,n=this.lookahead.index(),r=this.memos.get(n,e.name);if(r)this.lookahead.reset(r.pos),t=r.val;else{this.memos.set(n,e.name,{pos:n,val:null});for(var o=n,u=null;;){this.lookahead.reset(n),t=e.func(this);var c=this.lookahead.index();if(c<=o)break;o=c,u=t,this.memos.set(n,e.name,{pos:c,val:t})}t=u,this.lookahead.reset(o)}return t},r.prototype.fillLineno=function(e,n,r){t(e.hasOwnProperty("_ty"));var o=this.lookahead.tokens[n],u=this.lookahead.tokens[r];e.lineno=o.lineno,e.col_offset=o.col_offset,e.end_lineno=u.lineno,e.end_col_offset=u.end_col_offset},r.prototype.expectType=function(t){var n=this.lookahead.LT(1);if(n.type==t)return t!=e.EOF&&(this.log2("tokenType ".concat(t),!0),this.lookahead.consume()),n;for(var r=1;;){var o=this.lookahead.LT(r++);if(o.type!=e.NewLine&&o.type!=e.Indent&&o.type!=e.Dedent)return o.type==t?o:null}},r.prototype.expectOp=function(t){var n=this.lookahead.LT(1);return n.type==e.Op&&n.value==t&&(this.log2("expectOp ".concat(t),!0),this.lookahead.consume(),!0)},r.prototype.expectKw=function(t){var n=this.lookahead.LT(1);return n.type==e.Keyword&&n.value==t&&(this.log2("expectKw ".concat(t),!0),this.lookahead.consume(),!0)},r.prototype.expectWrapper=function(e){var t=this.lookahead.index(),n=!!e();return n||this.lookahead.reset(t),n},r.prototype.expectCombineAnd=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this.lookahead.index(),r=!0,o=0,u=e;o<u.length;o++){var c=u[o];if(!c()){r=!1;break}}return r||this.lookahead.reset(n),r},r.prototype.expectOption=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.lookahead.index(),r=e[0].apply(this);if(!r)return this.lookahead.reset(n),!0;for(var o=!0,u=1;u<e.length;u++){var c=e[u].apply(this);if(!c){o=!1;break}}return o||this.lookahead.reset(n),o},r.prototype.expectZeroMore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(;this.expectCombineAnd.apply(this,e););return!0},r.prototype.expectOneMore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;this.expectCombineAnd.apply(this,e);)n++;return n>0},r.prototype.expectSeparated=function(e,t){var n=this;if(t.apply(this)){for(;this.expectCombineAnd((function(){return n.expectOp(e)}),t););return!0}return!1},r.prototype.detectWrapper=function(e){var t=this.lookahead.index(),n=!!e.apply(this);return this.lookahead.reset(t),n},r.prototype.detectM=function(e){var t=this.lookahead.index(),n=this.memoAny(e);return this.lookahead.reset(t),n},r.prototype.detectLR=function(e){var t=this.lookahead.index(),n=this.memoLeftRec(e);return this.lookahead.reset(t),n},r.prototype.detectType=function(e){return this.lookahead.LT(1).type==e},r.prototype.detectKw=function(t){var n=this.lookahead.LT(1);return n.type==e.Keyword&&n.value==t},r.prototype.detectOp=function(t){var n=this.lookahead.LT(1);return n.type==e.Op&&n.value==t},r.prototype.detectCombineAnd=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=!0,r=this.lookahead.index(),o=0,u=e;o<u.length;o++){var c=u[o];if(!c.apply(this)){n=!1;break}}return this.lookahead.reset(r),n},r.prototype.skipTokens=function(){},r}(Q),te=j,ne=function(e){if(e._ty==te.Tuple)(n=e).elts.forEach(ne),n.ctx={_ty:"Store"};else if(e._ty==te.List){(n=e).elts.forEach(ne),n.ctx={_ty:"Store"}}else{var n;if(e._ty==te.Name||e._ty==te.Attribute||e._ty==te.Starred||e._ty==te.Subscript)(n=e).ctx={_ty:"Store"};else t(!1,"setStoreCtx _ty:"+e._ty)}},re=function(e,t){return void 0===t&&(t="Load"),{_ty:te.Name,id:e,ctx:{_ty:t}}},oe=function(e){return{_ty:te.Constant,value:e}},ue=function(e){return{_ty:te.Expr,value:e}},ce=function(e,t){return{_ty:te.UnaryOp,op:{_ty:e},operand:t}},ae=function(){return{_ty:te.arguments,posonlyargs:[],args:[],vararg:null,kwonlyargs:[],kw_defaults:[],kwarg:null,defaults:[]}},pe=function(e){return{_ty:te.BinOp,left:null,op:{_ty:e},right:null}},ie=function(){return{_ty:te.Call,func:null,args:[],keywords:[]}},le=function(e){return void 0===e&&(e="Load"),{_ty:te.Subscript,value:null,slice:null,ctx:{_ty:e}}},me=function(e){return void 0===e&&(e="Load"),{_ty:te.Attribute,value:null,attr:"",ctx:{_ty:e}}},se=function(){return{_ty:te.If,test:null,body:[],orelse:[]}},fe=function(){return{_ty:te.Tuple,elts:[],ctx:{_ty:"Load"}}},ye=function(e){return{_ty:te.alias,name:e,asname:null}},de=function(){return{_ty:te.keyword,arg:null,value:null}},he=function(e){return{_ty:te.arg,arg:e,annotation:null,type_comment:null}},xe=function(){return{_ty:te.MatchClass,cls:null,patterns:[],kwd_attrs:[],kwd_patterns:[]}},ve=function(){return{_ty:te.AnnAssign,target:null,annotation:null,value:null,simple:1}},Ae=function(){return{_ty:te.List,elts:[],ctx:{_ty:"Load"}}},we={name:"lambdef",func:function(e){if(ge(e)){var t={_ty:j.Lambda,args:null,body:null};e.expectKw("lambda");var n=e.memoAny(be);return n&&(t.args=n),e.expectOp("Colon"),t.body=e.memoAny(Kr),t}return null}},ge=function(e){return e.detectWrapper((function(){return!!(e.expectKw("lambda")&&(e.memoAny(be),e.expectOp("Colon")&&e.memoAny(Kr)))}))},be={name:"lambda_params",func:function(e){return e.detectM(Oe)?e.memoAny(Oe):null}},Oe={name:"lambda_parameters",func:function(e){if(_e(e)){for((n=ae()).posonlyargs=e.memoAny(Se);;){if(!(r=e.memoAny(Me)))break;n.args.push(r)}for(;;){if(!(o=e.memoAny(Pe)))break;n.args.push(o.arg),n.defaults.push(o.value)}return(u=e.memoAny(Ne))&&(n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg),n}if(ke(e)){var t=ae();for(e.memoAny(Fe).forEach((function(e){"arg"==e._ty?t.posonlyargs.push(e):(t.posonlyargs.push(e.arg),t.defaults.push(e.value))}));;){if(!(o=e.memoAny(Pe)))break;t.args.push(o.arg),t.defaults.push(o.value)}return(u=e.memoAny(Ne))&&(t.vararg=u.vararg,t.kwonlyargs=u.kwonlyargs,t.kw_defaults=u.kw_defaults,t.kwarg=u.kwarg),t}if(Ce(e)){for(var n=ae();;){var r;if(!(r=e.memoAny(Me)))break;n.args.push(r)}for(;;){if(!(o=e.memoAny(Pe)))break;n.args.push(o.arg),n.defaults.push(o.value)}return(u=e.memoAny(Ne))&&(n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg),n}if(Le(e)){for(n=ae();;){var o;if(!(o=e.memoAny(Pe)))break;n.args.push(o.arg),n.defaults.push(o.value)}return(u=e.memoAny(Ne))&&(n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg),n}if(e.detectM(Ne)){n=ae();var u=e.memoAny(Ne);return n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg,n}return null}},_e=function(e){return e.detectM(Se)},ke=function(e){return e.detectM(Fe)},Ce=function(e){return e.detectM(Me)},Le=function(e){return e.detectM(Pe)},Se={name:"lambda_slash_no_default",func:function(e){if(Re(e)){for(var t=[];;){if(!(n=e.memoAny(Me)))break;t.push(n)}return e.expectOp("Div"),e.expectOp("Comma"),t}if(We(e)){for(t=[];;){var n;if(!(n=e.memoAny(Me)))break;t.push(n)}return e.expectOp("Div"),t}return null}},Re=function(e){return e.detectWrapper((function(){if(e.expectOneMore((function(){return e.memoAny(Me)})))return e.expectOp("Div")&&e.expectOp("Comma")}))},We=function(e){return e.detectWrapper((function(){if(e.expectOneMore((function(){return e.memoAny(Me)})))return e.expectOp("Div")&&e.detectOp("Colon")}))},Me={name:"lambda_param_no_default",func:function(e){if(Te(e)){var t=e.memoAny(ze);return e.expectOp("Comma"),t}return Ee(e)?t=e.memoAny(ze):null}},Te=function(e){return e.detectWrapper((function(){return e.memoAny(ze)&&e.expectOp("Comma")}))},Ee=function(e){return e.detectWrapper((function(){return e.memoAny(ze)&&e.detectOp("Colon")}))},Pe={name:"lambda_param_with_default",func:function(e){if(Ke(e)){var t={arg:e.memoAny(ze),value:e.memoAny(Ve)};return e.expectOp("Comma"),t}return je(e)?t={arg:e.memoAny(ze),value:e.memoAny(Ve)}:null}},Ke=function(e){return e.detectWrapper((function(){return!!(e.memoAny(ze)&&e.memoAny(Ve)&&e.expectOp("Comma"))}))},je=function(e){return e.detectWrapper((function(){return!!(e.memoAny(ze)&&e.memoAny(Ve)&&e.detectOp("Colon"))}))},Fe={name:"lambda_slash_with_default",func:function(e){return null}},Ne={name:"lambda_star_etc",func:function(e){if(De(e)){var t={vararg:null,kwonlyargs:[],kw_defaults:[],kwarg:null};for(e.expectOp("Mult"),t.vararg=e.memoAny(Me);;){if(!(r=e.memoAny(Be)))break;t.kwonlyargs.push(r.arg),t.kw_defaults.push(r.value)}return(n=e.memoAny(Ue))&&(t.kwarg=n),t}if(Ie(e)){var n;t={vararg:null,kwonlyargs:[],kw_defaults:[],kwarg:null};for(e.expectOp("Mult"),e.expectOp("Comma");;){var r;if(!(r=e.memoAny(Be)))break;t.kwonlyargs.push(r.arg),t.kw_defaults.push(r.value)}return(n=e.memoAny(Ue))&&(t.kwarg=n),t}return e.detectM(Ue)?((t={vararg:null,kwonlyargs:[],kw_defaults:[],kwarg:null}).kwarg=e.memoAny(Ue),t):null}},De=function(e){return e.detectWrapper((function(){return!(!e.expectOp("Mult")||!e.memoAny(Me))}))},Ie=function(e){return e.detectWrapper((function(){return!!(e.expectOp("Mult")&&e.expectOp("Comma")&&e.memoAny(Be))}))},Be={name:"lambda_param_maybe_default",func:function(e){var t=null;if(qe(e)){var n=e.memoAny(ze),r=e.memoAny(Ve);e.expectOp("Comma"),t={arg:n,value:r}}else if(Ge(e)){t={arg:n=e.memoAny(ze),value:r=e.memoAny(Ve)}}return t}},qe=function(e){return e.detectWrapper((function(){return!(!e.memoAny(ze)||(e.memoAny(Ve),!e.expectOp("Comma")))}))},Ge=function(e){return e.detectWrapper((function(){return!(!e.memoAny(ze)||(e.memoAny(Ve),!e.detectOp("Colon")))}))},ze={name:"lambda_param",func:function(t){return t.detectType(e.Id)?he(t.consume().value):null}},Ue={name:"lambda_kwds",func:function(e){return e.detectWrapper((function(){return e.expectOp("Pow")&&e.memoAny(Me)}))?(e.expectOp("Pow"),e.memoAny(Me)):null}},Ve={name:"_default",func:function(e){return e.detectWrapper((function(){return e.expectOp("Assign")&&e.memoAny(Kr)}))?(e.expectOp("Assign"),e.memoAny(Kr)):null}},Ye={name:"assignment_expression",func:function(t){if(t.detectWrapper((function(){return t.expectType(e.Id)&&t.expectOp("Walrus")}))){var n={_ty:j.NamedExpr,target:null,value:null};return n.target=re(t.expectType(e.Id).value,"Store"),t.expectOp("Walrus"),t.detectWrapper((function(){return t.memoAny(Kr)}))?n.value=t.memo(Kr):t.reportError("':='符号后面有语法错误"),n}return null}},He={name:"arguments",func:function(e){if(Xe(e)){var t=e.memoAny($e);return e.expectOp("Comma"),t}return null}},Xe=function(e){return e.detectWrapper((function(){return!!e.memoAny($e)&&(e.expectOp("Comma"),e.detectOp("RParen"))}))},$e={name:"args",func:function(e){if(Je(e)){var t=[];for(t.push(e.memo(Ze));e.expectOp("Comma");){var n=e.memo(Ze);if(!n){var r=e.memoAny(et);r&&t.push.apply(t,r);break}t.push(n)}return t}return e.detectM(et)?e.memoAny(et):null}},Je=function(e){return e.detectWrapper((function(){return!(!e.expectSeparated("Comma",(function(){return e.memoAny(Ze)}))||(e.expectOption((function(){return e.expectOp("Comma")})),!function(){return e.memoAny(et)}))}))},Ze={name:"args_head",func:function(e){if(e.detectM(at))return e.memoAny(at);if(Qe(e)){var t=e.memoAny(Ye);return t||e.memoAny(Kr)}return null}},Qe=function(e){return e.detectWrapper((function(){var t=!1;return(e.memoAny(Ye)||e.memoAny(Kr)&&!e.detectOp("NotEq"))&&(t=!0),t&&!e.detectOp("Assign")}))},et={name:"kwargs",func:function(e){if(tt(e)){for((t=[]).push(e.memo(ot));e.expectOp("Comma");){if(n=e.memo(ot))t.push(n);else{if(!(n=e.memo(it)))break;t.push(n)}}return t}if(nt(e))for((t=[]).push(e.memo(ot));e.expectOp("Comma");){if(!(n=e.memo(ot)))break;t.push(n)}else if(rt(e)){var t;for((t=[]).push(e.memo(it));e.expectOp("Comma");){var n;if(!(n=e.memo(it)))break;t.push(n)}return t}return null}},tt=function(e){return e.detectWrapper((function(){return!(!e.expectSeparated("Comma",(function(){return e.memoAny(ot)}))||!e.expectOp("Comma"))&&e.expectSeparated("Comma",(function(){return e.memoAny(it)}))}))},nt=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(ot)}))}))},rt=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(it)}))}))},ot={name:"kwarg_or_starred",func:function(e){if(ut(e)){var t=de();return t.arg=e.consume().value,e.expectOp("Assign"),t.value=e.memo(Kr),t}return ct(e)?e.memo(at):null}},ut=function(t){return t.detectWrapper((function(){return t.expectType(e.Id)&&t.expectOp("Assign")&&t.memoAny(Kr)}))},ct=function(e){return e.detectM(at)},at={name:"starred_expression",func:function(e){if(pt(e)){var t={_ty:j.Starred,value:null,ctx:{_ty:"Load"}};return e.expectOp("Mult"),t.value=e.memo(Kr),t}return null}},pt=function(e){return e.detectWrapper((function(){return e.expectOp("Mult")&&e.memoAny(Kr)}))},it={name:"kwarg_or_double_starred",func:function(e){if(lt(e))return(t=de()).arg=e.consume().value,e.expectOp("Assign"),t.value=e.memo(Kr),t;if(mt(e)){var t=de();return e.expectOp("Pow"),t.value=e.memo(Kr),t}return null}},lt=function(t){return t.detectWrapper((function(){return t.expectType(e.Id)&&t.expectOp("Assign")&&t.memoAny(Kr)}))},mt=function(e){return e.detectWrapper((function(){return e.expectOp("Pow")&&e.memoAny(Kr)}))},st={name:"star_named_expressions",func:function(e){if(ft(e)){for(var t=[];;){var n=e.memoAny(yt);if(!n)break;if(t.push(n),!e.expectOp("Comma"))break}return t}return null}},ft=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(yt)}))}))},yt={name:"star_named_expression",func:function(e){if(dt(e)){var t={_ty:j.Starred,value:null,ctx:{_ty:"Load"}};return e.expectOp("Mult"),t.value=e.memoLeftRec(zn),t}return ht(e)?e.memoAny(xt):null}},dt=function(e){return e.detectWrapper((function(){return e.expectOp("Mult")&&e.memoLeftRec(zn)}))},ht=function(e){return e.detectM(xt)},xt={name:"named_expression",func:function(e){return vt(e)?e.memo(Ye):At(e)?e.memo(Kr):null}},vt=function(e){return e.detectM(Ye)},At=function(e){return e.detectWrapper((function(){return e.memoAny(Kr)&&!e.expectOp("Walrus")}))},wt={name:"yield_stmt",func:function(e){return e.detectM(gt)?ue(e.memoAny(gt)):null}},gt={name:"yield_expr",func:function(e){if(bt(e)){var t={_ty:j.YieldFrom,value:null};return e.expectKw("yield"),e.expectKw("from"),t.value=e.memoAny(Kr),t}if(Ot(e)){t={_ty:j.Yield,value:null};return e.expectKw("yield"),t.value=e.memoAny(Sr),t}return null}},bt=function(e){return e.detectWrapper((function(){return e.expectKw("yield")&&e.expectKw("from")&&e.memoAny(Kr)}))},Ot=function(e){return e.detectKw("yield")},_t={name:"literal_expr",func:function(e){return e.detectWrapper((function(){return e.memoAny(Ct)&&!e.detectOp("Add")&&!e.detectOp("Sub")}))?e.memo(Ct):e.detectM(Lt)?e.memo(Lt):e.detectM(Et)?e.memo(Et):e.detectKw("None")?(e.consume(),oe(null)):e.detectKw("True")?(e.consume(),oe(!0)):e.detectKw("False")?(e.consume(),oe(!1)):null}},kt={name:"guard",func:function(e){return e.detectWrapper((function(){return e.expectKw("if")&&e.memoAny(xt)}))?e.memoAny(xt):null}},Ct={name:"signed_number",func:function(t){return t.detectType(e.Number)?oe(t.consume().auxValue):t.detectWrapper((function(){return t.expectOp("Sub")&&t.detectType(e.Number)}))?(t.expectOp("Sub"),ce("USub",t.consume().auxValue)):null}},Lt={name:"complex_number",func:function(e){var t;return St(e)?((t=pe("Add")).left=e.memoAny(Wt),e.expectOp("Add"),t.right=e.memoAny(Tt),t):Rt(e)?((t=pe("Sub")).left=e.memoAny(Wt),e.expectOp("Sub"),t.right=e.memoAny(Tt),t):null}},St=function(e){return e.detectWrapper((function(){return e.memoAny(Wt)&&e.expectOp("Add")&&e.memoAny(Tt)}))},Rt=function(e){return e.detectWrapper((function(){return e.memoAny(Wt)&&e.expectOp("Sub")&&e.memoAny(Tt)}))},Wt={name:"signed_real_number",func:function(e){return e.detectM(Mt)?e.memoAny(Mt):e.detectWrapper((function(){return e.expectOp("Sub")&&e.memoAny(Mt)}))?(e.expectOp("Sub"),ce("USub",e.memoAny(Mt))):null}},Mt={name:"real_number",func:function(t){return t.detectType(e.Number)?oe(t.consume().auxValue):null}},Tt={name:"imaginary_number",func:function(t){return t.detectType(e.Number)?oe(t.consume().auxValue):null}},Et={name:"strings",func:function(t){var n=t.lookahead.LT(1);return n.type==e.String?(t.consume(),oe(n.value)):null}},Pt={name:"attr",func:function(e){if(Kt(e)){var t=me();return t.value=e.memoLeftRec(jt),e.expectOp("Dot"),t.attr=e.consume().value,t}return null}},Kt=function(t){return t.detectWrapper((function(){return t.memoLeftRec(jt)&&t.expectOp("Dot")&&t.expectType(e.Id)}))},jt={name:"name_or_attr",func:function(t){return t.detectLR(Pt)?t.memoLeftRec(Pt):t.detectType(e.Id)?re(t.consume().value):null}},Ft={name:"slices",func:function(e){if(Nt(e))return e.memo(It);if(Dt(e)){for(var t=fe();;){var n=e.memo(It);if(!n||(t.elts.push(n),!e.expectOp("Comma")))break}return t}return null}},Nt=function(e){return e.detectWrapper((function(){return e.memoAny(It)&&"Comma"!=e.lookahead.LT(1).value}))},Dt=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(It)}))}))},It={name:"slice",func:function(e){if(Bt(e)){var t={_ty:j.Slice,lower:null,upper:null,step:null},n=e.memo(Kr);t.lower=n,e.expectOp("Colon");var r=e.memo(Kr);if(t.upper=r,e.expectOp("Colon")){var o=e.memo(Kr);t.step=o}return t}return e.detectM(xt)?e.memo(xt):null}},Bt=function(e){return e.detectWrapper((function(){return e.memo(Kr),e.expectOp("Colon")}))},qt=function(e){var t=e.lookahead.LT(1);return"LParen"==t.value||"LSquare"==t.value||"Dot"==t.value},Gt={name:"t_primary",func:function(t){var n;return zt(t)?((n=me()).value=t.memoLeftRec(Gt),t.expectOp("Dot"),n.attr=t.expectType(e.Id).value,n):Ut(t)?((n=le()).value=t.memoLeftRec(Gt),t.expectOp("LSquare"),n.slice=Ft.func(t),t.expectOp("RSquare"),n):Vt(t)?((n=ie()).func=t.memoLeftRec(Gt),n.args.push(t.memoAny(bn)),n):Yt(t)?((n=ie()).func=t.memoLeftRec(Gt),t.expectOp("LParen"),n.args=He.func(t),t.expectOp("RParen"),n):Ht(t)?t.memoAny(xn):null}},zt=function(t){return t.detectWrapper((function(){return t.memoLeftRec(Gt)&&t.expectOp("Dot")&&t.expectType(e.Id)&&qt(t)}))},Ut=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Gt)&&e.expectOp("LSquare")&&Ft.func(e)&&e.expectOp("RSquare")&&qt(e)}))},Vt=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Gt)&&e.memoAny(bn)&&qt(e)}))},Yt=function(e){return e.detectWrapper((function(){return!!(e.memoLeftRec(Gt)&&e.expectOp("LParen")&&(He.func(e),e.expectOp("RParen")&&qt(e)))}))},Ht=function(e){return e.detectWrapper((function(){return e.memoAny(xn)&&qt(e)}))},Xt={name:"star_targets",func:function(e){if($t(e))return e.memo(Zt);if(Jt(e)){var t=fe();for(t.elts.push(e.memo(Zt));e.expectOp("Comma");){var n=e.memo(Zt);if(!n)break;t.elts.push(n)}return t}return null}},$t=function(e){return e.detectWrapper((function(){return e.memoAny(Zt)&&"Comma"!=e.lookahead.LT(1).value}))},Jt=function(e){return e.detectWrapper((function(){return!!e.memoAny(Zt)&&(e.expectZeroMore((function(){return e.expectOp("Comma")}),(function(){return e.memoAny(Zt)})),e.expectOp("Comma"),!0)}))},Zt={name:"star_target",func:function(e){if(Qt(e)){var t={_ty:j.Starred,value:null,ctx:{_ty:"Load"}};return e.expectOp("Mult"),t.value=e.memo(Zt),t}return en(e)?e.memo(tn):null}},Qt=function(e){return e.detectWrapper((function(){return e.expectOp("Mult")&&"Mult"!=e.lookahead.LT(1).value&&e.memoAny(Zt)}))},en=function(e){return e.detectM(tn)},tn={name:"target_with_star_atom",func:function(t){var n;return nn(t)?((n=me()).value=t.memoLeftRec(Gt),t.expectOp("Dot"),n.attr=t.expectType(e.Id).value,n):rn(t)?((n={_ty:j.Subscript,value:null,slice:null,ctx:{_ty:"Load"}}).value=t.memoLeftRec(Gt),t.expectOp("LSquare"),n.slice=Ft.func(t),t.expectOp("RSquare"),n):t.detectM(on)?t.memoAny(on):null}},nn=function(t){return t.detectWrapper((function(){return t.memoLeftRec(Gt)&&t.expectOp("Dot")&&t.expectType(e.Id)&&!qt(t)}))},rn=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Gt)&&e.expectOp("LSquare")&&e.memoAny(Ft)&&e.expectOp("RSquare")&&!qt(e)}))},on={name:"star_atom",func:function(t){if(t.detectType(e.Id))return re(t.expectType(e.Id).value);if(un(t)){t.expectOp("LParen");var n=t.memoAny(tn);return t.expectOp("RParen"),n}if(cn(t)){t.expectOp("LParen");var r=pn.func(t);n=fe();return r&&(n.elts=r),t.expectOp("RParen"),n}if(an(t)){t.expectOp("LSquare");r=sn.func(t),n=Ae();return r&&(n.elts=r),t.expectOp("RSquare"),n}return null}},un=function(e){return e.detectWrapper((function(){return e.expectOp("LParen")&&e.memoAny(tn)&&e.expectOp("RParen")}))},cn=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LParen")||(pn.func(e),!e.expectOp("RParen")))}))},an=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LSquare")||(sn.func(e),!e.expectOp("RSquare")))}))},pn={name:"star_targets_tuple_seq",func:function(e){if(ln(e)){for((n=[]).push(e.memoAny(Zt));e.expectOp("Comma");){var t=e.memoAny(Zt);if(!t)break;n.push(t)}return n}var n;return mn(e)?((n=[]).push(e.memoAny(Zt)),e.expectOp("Comma"),n):null}},ln=function(e){return e.detectWrapper((function(){return!!(e.memoAny(Zt)&&e.expectOp("Comma")&&e.memoAny(Zt))}))},mn=function(e){return e.detectWrapper((function(){return e.memoAny(Zt)&&e.expectOp("Comma")}))},sn={name:"star_targets_list_seq",func:function(e){if(fn(e)){for(var t=[];;){var n=e.memoAny(Zt);if(!n||(t.push(n),!e.expectOp("Comma")))break}return t}return null}},fn=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(Zt)}))}))},yn={name:"for_if_clauses",func:function(e){if(e.detectM(dn)){for(var t=[];;){var n=e.memoAny(dn);if(!n)break;t.push(n)}return t}return null}},dn={name:"for_if_clause",func:function(e){if(hn(e)||e.detectWrapper((function(){return e.expectKw("async")&&hn(e)}))){var t=(o=e.expectKw("async"),{_ty:te.comprehension,target:null,iter:null,ifs:[],is_async:o?1:0});if(e.expectKw("for"),t.target=e.memoAny(Xt),ne(t.target),e.expectKw("in"),e.detectWrapper((function(){return e.memoAny(Ar)}))){t.iter=e.memoAny(Ar);for(var n=[];e.expectKw("if");){var r=e.memoAny(Ar);if(!r){e.reportError("'if'后面有语法错误");break}n.push(r)}n.length>0&&(t.ifs=n)}else e.reportError("for...if语句中有语法错误");return t}var o;return null}},hn=function(e){return e.detectWrapper((function(){return e.expectKw("for")&&e.memoAny(Xt)&&e.expectKw("in")}))},xn={name:"atom",func:function(t){t.log0("atom");var n=t.lookahead.LT(1);if(n.type==e.Id)return t.log2("atom Id",!0),t.consume(),re(n.value);if(n.type==e.Keyword){if("True"==n.value)return t.log2("atom Keyword",!0),t.consume(),oe(!0);if("False"==n.value)return t.log2("atom Keyword",!0),t.consume(),oe(!1);if("None"==n.value)return t.log2("atom Keyword",!0),t.consume(),oe(null)}return n.type==e.String?(t.log2("atom String",!0),t.consume(),oe(n.value)):n.type==e.Number?(t.log2("atom Number",!0),t.consume(),oe(n.auxValue)):t.detectM(vn)?(t.log2("atom tuple",!0),t.memo(vn)):t.detectM(wn)?(t.log2("atom group",!0),t.memo(wn)):t.detectM(bn)?t.memo(bn):t.detectM(_n)?(t.log2("atom list",!0),t.memo(_n)):t.detectM(Cn)?(t.log2("atom listcomp",!0),t.memo(Cn)):t.detectM(Sn)?(t.log2("atom dict",!0),t.memo(Sn)):t.detectM(Wn)?(t.log2("atom set",!0),t.memo(Wn)):t.detectM(Tn)?(t.log2("atom dictcomp",!0),t.memo(Tn)):t.detectM(Pn)?(t.log2("atom setcomp",!0),t.memo(Pn)):null}},vn={name:"tuple",func:function(e){var t;if(An(e)){var n=fe();e.expectOp("LParen");var r=e.memoAny(yt);if(r){n.elts.push(r),e.expectOp("Comma");var o=e.memoAny(st);o&&(t=n.elts).push.apply(t,o)}return e.expectOp("RParen"),n}return null}},An=function(e){return e.detectWrapper((function(){if(e.expectOp("LParen"))if(e.memoAny(yt)){if(e.expectOp("Comma")&&(e.memoAny(st),e.expectOp("RParen")))return!0}else if(e.expectOp("RParen"))return!0;return!1}))},wn={name:"group",func:function(e){if(gn(e)){e.expectOp("LParen");var t=e.memoAny(gt);return t||(t=e.memoAny(xt)),e.expectOp("RParen"),t}return null}},gn=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LParen")||!e.memoAny(gt)&&!e.memoAny(xt)||!e.expectOp("RParen"))}))},bn={name:"genexp",func:function(e){if(On(e)){var t={_ty:j.GeneratorExp,elt:null,generators:[]};e.expectOp("LParen");var n=e.memoAny(Ye);return t.elt=n||e.memoAny(Kr),t.generators=e.memoAny(yn),e.expectOp("RParen"),t}return null}},On=function(e){return e.detectWrapper((function(){return!!(e.expectOp("LParen")&&(e.memoAny(Ye)||e.memoAny(Kr)&&!e.detectOp("Walrus"))&&e.memoAny(yn)&&e.expectOp("RParen"))}))},_n={name:"list",func:function(e){if(kn(e)){var t=Ae();e.expectOp("LSquare");var n=e.memoAny(st);return n&&(t.elts=n),e.expectOp("RSquare"),t}return null}},kn=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LSquare")||(e.memoAny(st),!e.expectOp("RSquare")))}))},Cn={name:"listcomp",func:function(e){if(Ln(e)){var t={_ty:j.ListComp,elt:null,generators:[]};return e.expectOp("LSquare"),t.elt=e.memoAny(xt),t.generators=e.memoAny(yn),e.expectOp("RSquare"),t}return null}},Ln=function(e){return e.detectWrapper((function(){return e.expectOp("LSquare")&&e.memoAny(xt)&&e.memoAny(yn)&&e.expectOp("RSquare")}))},Sn={name:"dict",func:function(e){if(Rn(e)){var t={_ty:j.Dict,keys:[],values:[]};e.expectOp("LBracket");var n=e.memoAny(jn);return n&&n.forEach((function(e){t.keys.push(e.key),t.values.push(e.value)})),e.expectOp("RBracket"),t}return null}},Rn=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LBracket")||(e.memoAny(jn),!e.expectOp("RBracket")))}))},Wn={name:"set",func:function(e){if(Mn(e)){var t={_ty:j.Set,elts:[]};return e.expectOp("LBracket"),t.elts=e.memoAny(st),e.expectOp("RBracket"),t}return null}},Mn=function(e){return e.detectWrapper((function(){return e.expectOp("LBracket")&&e.memoAny(st)&&e.expectOp("RBracket")}))},Tn={name:"dictcomp",func:function(e){if(En(e)){var t={_ty:j.DictComp,key:null,value:null,generators:[]};e.expectOp("LBracket");var n=e.memoAny(Dn);return t.key=n[0],t.value=n[1],t.generators=e.memoAny(yn),e.expectOp("RBracket"),t}return null}},En=function(e){return e.detectWrapper((function(){return e.expectOp("LBracket")&&e.memoAny(Dn)&&e.memoAny(yn)&&e.expectOp("RBracket")}))},Pn={name:"setcomp",func:function(e){if(Kn(e)){var t={_ty:j.SetComp,elt:null,generators:[]};return e.expectOp("LBracket"),t.elt=e.memoAny(xt),t.generators=e.memoAny(yn),e.expectOp("RBracket"),t}return null}},Kn=function(e){return e.detectWrapper((function(){return e.expectOp("LBracket")&&e.memoAny(xt)&&e.memoAny(yn)&&e.expectOp("RBracket")}))},jn={name:"double_starred_kvpairs",func:function(e){if(Fn(e)){var t=[];for(t.push(e.memoAny(Nn));e.expectOp("Comma");){var n=e.memoAny(Nn);if(!n)break;t.push(n)}return t}return null}},Fn=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(Nn)}))}))},Nn={name:"double_starred_kvpair",func:function(e){if(e.detectWrapper((function(){return e.expectOp("Pow")&&e.memoLeftRec(zn)}))){var t={key:null,value:null};return e.expectOp("Pow"),t.value=e.memoLeftRec(zn),t}return e.detectM(Dn)?e.memoAny(Dn):null}},Dn={name:"kvpair",func:function(e){if(In(e)){var t={key:null,value:null};return t.key=e.memoAny(Kr),e.expectOp("Colon"),t.value=e.memoAny(Kr),t}return null}},In=function(e){return e.detectWrapper((function(){return e.memoAny(Kr)&&e.expectOp("Colon")&&e.memoAny(Kr)}))},Bn={name:"comparison",func:function(e){if(e.log0("comparison"),qn(e)){var t={_ty:j.Compare,left:null,ops:[],comparators:[]};for(t.left=e.memoLeftRec(zn);;){var n=Gn.func(e);if(!n)break;t.ops.push(n.op),t.comparators.push(n.data)}return t}return e.detectLR(zn)?e.memoLeftRec(zn):null}},qn=function(e){return e.detectWrapper((function(){return e.memoLeftRec(zn)&&e.memoAny(Gn)}))},Gn={name:"compare_op_bitwise_or_pair",func:function(e){return e.detectWrapper((function(){return e.expectOp("Eq")&&e.memoLeftRec(zn)}))?(e.expectOp("Eq"),{op:{_ty:"Eq"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectOp("NotEq")&&e.memoLeftRec(zn)}))?(e.expectOp("NotEq"),{op:{_ty:"NotEq"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectOp("LtE")&&e.memoLeftRec(zn)}))?(e.expectOp("LtE"),{op:{_ty:"LtE"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectOp("Lt")&&e.memoLeftRec(zn)}))?(e.expectOp("Lt"),{op:{_ty:"Lt"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectOp("GtE")&&e.memoLeftRec(zn)}))?(e.expectOp("GtE"),{op:{_ty:"GtE"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectOp("Gt")&&e.memoLeftRec(zn)}))?(e.expectOp("Gt"),{op:{_ty:"Gt"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectKw("not")&&e.expectKw("in")&&e.memoLeftRec(zn)}))?(e.expectKw("not"),e.expectKw("in"),{op:{_ty:"NotIn"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectKw("in")&&e.memoLeftRec(zn)}))?(e.expectKw("in"),{op:{_ty:"In"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectKw("is")&&e.expectKw("not")&&e.memoLeftRec(zn)}))?(e.expectKw("is"),e.expectKw("not"),{op:{_ty:"IsNot"},data:e.memoLeftRec(zn)}):e.detectWrapper((function(){return e.expectKw("is")&&e.memoLeftRec(zn)}))?(e.expectKw("is"),{op:{_ty:"Is"},data:e.memoLeftRec(zn)}):null}},zn={name:"bitwise_or",func:function(t){if(t.log0("bitwise_or"),Un(t)){var n=pe("BitOr");return n.left=t.memoLeftRec(zn),t.expectType(e.Op),n.right=t.memoLeftRec(Vn),n}return t.detectLR(Vn)?t.memoLeftRec(Vn):null}},Un=function(e){return e.detectWrapper((function(){return e.memoLeftRec(zn)&&e.expectOp("BitOr")&&e.memoLeftRec(Vn)}))},Vn={name:"bitwise_xor",func:function(t){if(t.log0("bitwise_xor"),Yn(t)){var n=pe("BitXor");return n.left=t.memoLeftRec(Vn),t.expectType(e.Op),n.right=t.memoLeftRec(Hn),n}return t.detectLR(Hn)?t.memoLeftRec(Hn):null}},Yn=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Vn)&&e.expectOp("BitXor")&&e.memoLeftRec(Hn)}))},Hn={name:"bitwise_and",func:function(t){if(t.log0("bitwise_and"),Xn(t)){var n=pe("BitAnd");return n.left=t.memoLeftRec(Hn),t.expectType(e.Op),n.right=t.memoLeftRec($n),n}return t.detectLR($n)?t.memoLeftRec($n):null}},Xn=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Hn)&&e.expectOp("BitAnd")&&e.memoLeftRec($n)}))},$n={name:"shift_expr",func:function(e){var t;return Jn(e)?((t=pe("LShift")).left=e.memoLeftRec($n),e.expectOp("LShift"),t.right=e.memoLeftRec(Qn),t):Zn(e)?((t=pe("RShift")).left=e.memoLeftRec($n),e.expectOp("RShift"),t.right=e.memoLeftRec(Qn),t):e.detectLR(Qn)?t=e.memoLeftRec(Qn):null}},Jn=function(e){return e.detectWrapper((function(){return e.memoLeftRec($n)&&e.expectOp("LShift")&&e.memoLeftRec(Qn)}))},Zn=function(e){return e.detectWrapper((function(){return e.memoLeftRec($n)&&e.expectOp("RShift")&&e.memoLeftRec(Qn)}))},Qn={name:"sum",func:function(t){var n;return t.log0("sum"),er(t)?((n=pe("Add")).left=t.memoLeftRec(Qn),t.expectType(e.Op),n.right=t.memoLeftRec(nr),n):tr(t)?((n=pe("Sub")).left=t.memoLeftRec(Qn),t.expectType(e.Op),n.right=t.memoLeftRec(nr),n):t.detectLR(nr)?t.memoLeftRec(nr):null}},er=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Qn)&&e.expectOp("Add")&&e.memoLeftRec(nr)}))},tr=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Qn)&&e.expectOp("Sub")&&e.memoLeftRec(nr)}))},nr={name:"term",func:function(t){var n;return rr(t)?((n=pe("Mult")).left=t.memoLeftRec(nr),t.expectType(e.Op),n.right=t.memo(ir),n):or(t)?((n=pe("Div")).left=t.memoLeftRec(nr),t.expectType(e.Op),n.right=t.memo(ir),n):ur(t)?((n=pe("FloorDiv")).left=t.memoLeftRec(nr),t.expectType(e.Op),n.right=t.memo(ir),n):cr(t)?((n=pe("Mod")).left=t.memoLeftRec(nr),t.expectType(e.Op),n.right=t.memo(ir),n):ar(t)?((n=pe("MatMult")).left=t.memoLeftRec(nr),t.expectType(e.Op),n.right=t.memo(ir),n):pr(t)?t.memo(ir):null}},rr=function(e){return e.detectWrapper((function(){return e.memoLeftRec(nr)&&e.expectOp("Mult")&&e.memoAny(ir)}))},or=function(e){return e.detectWrapper((function(){return e.memoLeftRec(nr)&&e.expectOp("Div")&&e.memoAny(ir)}))},ur=function(e){return e.detectWrapper((function(){return e.memoLeftRec(nr)&&e.expectOp("FloorDiv")&&e.memoAny(ir)}))},cr=function(e){return e.detectWrapper((function(){return e.memoLeftRec(nr)&&e.expectOp("Mod")&&e.memoAny(ir)}))},ar=function(e){return e.detectWrapper((function(){return e.memoLeftRec(nr)&&e.expectOp("MatMult")&&e.memoAny(ir)}))},pr=function(e){return e.detectM(ir)},ir={name:"factor",func:function(e){return e.detectWrapper((function(){return e.expectOp("Add")&&e.memo(ir)}))?(e.expectOp("Add"),ce("UAdd",e.memo(ir))):e.detectWrapper((function(){return e.expectOp("Sub")&&e.memo(ir)}))?(e.expectOp("Sub"),ce("USub",e.memo(ir))):e.detectWrapper((function(){return e.expectOp("Invert")&&e.memo(ir)}))?(e.expectOp("Invert"),ce("Invert",e.memo(ir))):e.detectM(lr)?e.memo(lr):null}},lr={name:"power",func:function(e){if(mr(e)){var t=pe("Pow");return t.left=sr.func(e),e.expectOp("Pow"),t.right=e.memoAny(ir),t}return e.detectM(sr)?sr.func(e):null}},mr=function(e){return e.detectWrapper((function(){return e.memoAny(sr)&&e.expectOp("Pow")&&e.memoAny(ir)}))},sr={name:"await_primary",func:function(e){if(e.log0("await_primary"),fr(e)){e.expectKw("await");var t={_ty:j.Await,value:null};return t.value=e.memoLeftRec(yr),t}return e.detectLR(yr)?e.memoLeftRec(yr):null}},fr=function(e){return e.detectWrapper((function(){return e.expectKw("await")&&e.memoLeftRec(yr)}))},yr={name:"primary",func:function(t){var n;return t.log0("primary"),dr(t)?((n=me()).value=t.memoLeftRec(yr),t.consume(),n.attr=t.expectType(e.Id).value,n):hr(t)?((n=ie()).func=t.memoLeftRec(yr),n.args.push(t.memo(bn)),n):xr(t)?((n=ie()).func=t.memoLeftRec(yr),t.expectOp("LParen"),n.args=He.func(t),t.expectOp("RParen"),n):vr(t)?((n=le()).value=t.memoLeftRec(yr),t.expectOp("LSquare"),n.slice=Ft.func(t),t.expectOp("RSquare"),n):t.detectM(xn)?t.memo(xn):null}},dr=function(t){return t.detectWrapper((function(){return t.memoLeftRec(yr)&&t.expectOp("Dot")&&t.expectType(e.Id)}))},hr=function(e){return e.detectWrapper((function(){return e.memoLeftRec(yr)&&e.memoAny(bn)}))},xr=function(e){return e.detectWrapper((function(){return!!(e.memoLeftRec(yr)&&e.expectOp("LParen")&&(He.func(e),e.expectOp("RParen")))}))},vr=function(e){return e.detectWrapper((function(){return e.memoLeftRec(yr)&&e.expectOp("LSquare")&&Ft.func(e)&&e.expectOp("RSquare")}))},Ar={name:"disjunction",func:function(e){if(e.log0("disjunction"),wr(e)){var t={_ty:j.BoolOp,op:{_ty:"Or"},values:[]};for(t.values.push(e.memo(br));;){var n=!1;if(e.expectKw("or")){var r=e.memo(br);r&&(t.values.push(r),n=!0)}if(!n)break}return t}return gr(e)?e.memo(br):null}},wr=function(e){return e.detectWrapper((function(){return!!e.memoAny(br)&&e.expectOneMore((function(){return e.expectOp("or")}),(function(){return e.memoAny(br)}))}))},gr=function(e){return e.detectWrapper((function(){return e.memoAny(br)}))},br={name:"conjunction",func:function(e){if(e.log0("conjunction"),Or(e)){var t={_ty:j.BoolOp,op:{_ty:"And"},values:[]};for(t.values.push(e.memo(kr));;){var n=!1;if(e.expectKw("and")){var r=e.memo(kr);r&&(t.values.push(r),n=!0)}if(!n)break}return t}return _r(e)?e.memo(kr):null}},Or=function(e){return e.detectWrapper((function(){return!!e.memoAny(kr)&&e.expectOneMore((function(){return e.expectKw("and")}),(function(){return e.memoAny(kr)}))}))},_r=function(e){return e.detectM(kr)},kr={name:"inversion",func:function(t){return t.log0("inversion"),Cr(t)?(t.expectType(e.Keyword),ce("Not",t.memo(kr))):Lr(t)?t.memo(Bn):null}},Cr=function(e){return e.detectWrapper((function(){return e.expectKw("not")&&e.memoAny(kr)}))},Lr=function(e){return e.detectM(Bn)},Sr={name:"star_expressions",func:function(e){if(Rr(e)){for((n=fe()).elts.push(Tr.func(e));;){if(e.expectOp("Comma")){var t=Tr.func(e);if(t){n.elts.push(t);continue}}break}return n}var n;return Wr(e)?((n=fe()).elts.push(Tr.func(e)),e.expectOp("Comma"),n):Mr(e)?Tr.func(e):null}},Rr=function(e){return e.detectWrapper((function(){return e.log0("star_expressions_alt0"),!!e.memoAny(Tr)&&e.expectOneMore((function(){return e.expectOp("Comma")}),(function(){return e.memoAny(Tr)}))}))},Wr=function(e){return e.detectWrapper((function(){return e.memoAny(Tr)&&e.expectOp("Comma")}))},Mr=function(e){return e.detectM(Tr)},Tr={name:"star_expression",func:function(t){if(Er(t)){var n={_ty:j.Starred,value:null,ctx:{_ty:"Load"}};return t.expectType(e.Op),n.value=t.memoLeftRec(zn),n}return Pr(t)?t.memoAny(Kr):null}},Er=function(e){return e.detectWrapper((function(){return e.expectOp("Mult")&&e.memoLeftRec(zn)}))},Pr=function(e){return e.detectM(Kr)},Kr={name:"expression",func:function(t){if(t.log0("expression"),jr(t)){var n={_ty:j.IfExp,test:null,body:null,orelse:null};return n.body=t.memoAny(Ar),t.expectType(e.Keyword),n.test=t.memoAny(Ar),t.expectType(e.Keyword),n.orelse=t.memoAny(Kr).value,n}return t.detectM(Ar)?t.memo(Ar):t.detectM(we)?t.memo(we):null}},jr=function(e){return e.detectWrapper((function(){return!!(e.memoAny(Ar)&&e.expectKw("if")&&e.memoAny(Ar)&&e.expectKw("else")&&e.memoAny(Kr))}))},Fr={name:"decorators",func:function(t){if(Nr(t)){for(var n=[];Nr(t);){t.expectOp("MatMult");var r=t.memoAny(xt);t.expectType(e.NewLine),r&&n.push(r)}return n}return null}},Nr=function(t){return t.detectWrapper((function(){return t.expectOp("MatMult")&&t.memoAny(xt)&&t.expectType(e.NewLine)}))},Dr={name:"params",func:function(e){return e.detectM(Ir)?e.memoAny(Ir):null}},Ir={name:"parameters",func:function(e){if(Br(e)){for((n=ae()).posonlyargs=e.memoAny(Vr);;){if(!(r=e.memoAny(Zr)))break;n.args.push(r)}for(;;){if(!(o=e.memoAny(ro)))break;n.args.push(o.arg),n.defaults.push(o.value)}return(u=e.memoAny(ao))&&(n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg),n}if(qr(e)){var t=ae();for(e.memoAny(Xr).forEach((function(e){"arg"==e._ty?t.posonlyargs.push(e):(t.posonlyargs.push(e.arg),t.defaults.push(e.value))}));;){if(!(o=e.memoAny(ro)))break;t.args.push(o.arg),t.defaults.push(o.value)}return(u=e.memoAny(ao))&&(t.vararg=u.vararg,t.kwonlyargs=u.kwonlyargs,t.kw_defaults=u.kw_defaults,t.kwarg=u.kwarg),t}if(Gr(e)){for(var n=ae();;){var r;if(!(r=e.memoAny(Zr)))break;n.args.push(r)}for(;;){if(!(o=e.memoAny(ro)))break;n.args.push(o.arg),n.defaults.push(o.value)}return(u=e.memoAny(ao))&&(n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg),n}if(zr(e)){for(n=ae();;){var o;if(!(o=e.memoAny(ro)))break;n.args.push(o.arg),n.defaults.push(o.value)}return(u=e.memoAny(ao))&&(n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg),n}if(Ur(e)){n=ae();var u=e.memoAny(ao);return n.vararg=u.vararg,n.kwonlyargs=u.kwonlyargs,n.kw_defaults=u.kw_defaults,n.kwarg=u.kwarg,n}return null}},Br=function(e){return e.detectWrapper((function(){if(e.memoAny(Vr)){for(;e.memoAny(Zr););for(;e.memoAny(ro););return!0}return!1}))},qr=function(e){return e.detectWrapper((function(){if(e.memoAny(Vr)){for(;e.memoAny(Zr););for(;e.memoAny(ro););return!0}return!1}))},Gr=function(e){return e.detectWrapper((function(){return e.expectOneMore((function(){return e.memoAny(Zr)}))}))},zr=function(e){return e.detectWrapper((function(){return e.expectOneMore((function(){return e.memoAny(ro)}))}))},Ur=function(e){return e.detectM(ao)},Vr={name:"slash_no_default",func:function(e){if(Yr(e)){for(var t=[];;){if(!(n=e.memoAny(Zr)))break;t.push(n)}return e.expectOp("Div"),e.expectOp("Comma"),t}if(Hr(e)){for(t=[];;){var n;if(!(n=e.memoAny(Zr)))break;t.push(n)}return e.expectOp("Div"),t}return null}},Yr=function(e){return e.detectWrapper((function(){return!!e.expectOneMore((function(){return e.memoAny(Zr)}))&&(e.expectOp("Div")&&e.expectOp("Comma"))}))},Hr=function(e){return e.detectWrapper((function(){return!!e.expectOneMore((function(){return e.memoAny(Zr)}))&&(e.expectOp("Div")&&e.detectOp("RParen"))}))},Xr={name:"slash_with_default",func:function(e){if($r(e)){for(var t=[];;){if(!(n=e.memoAny(Zr)))break;t.push(n)}for(;;){if(!(n=e.memoAny(ro)))break;t.push(n)}return e.expectOp("Div"),e.expectOp("Comma"),t}if(Jr(e)){for(t=[];;){if(!(n=e.memoAny(Zr)))break;t.push(n)}for(;;){var n;if(!(n=e.memoAny(ro)))break;t.push(n)}return e.expectOp("Div"),t}return null}},$r=function(e){return e.detectWrapper((function(){for(;e.memoAny(Zr););return!!e.expectOneMore((function(){return e.memoAny(ro)}))&&(e.expectOp("Div")&&e.expectOp("Comma"))}))},Jr=function(e){return e.detectWrapper((function(){for(;e.memoAny(Zr););return!!e.expectOneMore((function(){return e.memoAny(ro)}))&&(e.expectOp("Div")&&e.detectOp("RParen"))}))},Zr={name:"param_no_default",func:function(e){if(Qr(e)){var t=e.memoAny(to);return e.expectOp("Comma"),t}return eo(e)?t=e.memoAny(to):null}},Qr=function(e){return e.detectWrapper((function(){return!(!e.memoAny(to)||!e.expectOp("Comma"))}))},eo=function(e){return e.detectWrapper((function(){return!(!e.memoAny(to)||!e.detectOp("RParen"))}))},to={name:"param",func:function(t){if(t.detectType(e.Id)){var n=he(t.consume().value),r=t.memoAny(no);return r&&(n.annotation=r),n}return null}},no={name:"annotation",func:function(e){return e.detectWrapper((function(){return e.expectOp("Colon")&&e.memoAny(Kr)}))?(e.consume(),e.memoAny(Kr)):null}},ro={name:"param_with_default",func:function(e){if(oo(e)){var t={arg:e.memoAny(to),value:e.memoAny(co)};return e.expectOp("Comma"),t}return uo(e)?t={arg:e.memoAny(to),value:e.memoAny(co)}:null}},oo=function(e){return e.detectWrapper((function(){return!!(e.memoAny(to)&&e.memoAny(co)&&e.expectOp("Comma"))}))},uo=function(e){return e.detectWrapper((function(){return!!(e.memoAny(to)&&e.memoAny(co)&&e.detectOp("RParen"))}))},co={name:"_default",func:function(e){return e.detectWrapper((function(){return e.expectOp("Assign")&&e.memoAny(Kr)}))?(e.expectOp("Assign"),e.memoAny(Kr)):null}},ao={name:"star_etc",func:function(e){if(po(e)){var t={vararg:null,kwonlyargs:[],kw_defaults:[],kwarg:null};for(e.expectOp("Mult"),t.vararg=e.memoAny(Zr);;){if(!(r=e.memoAny(mo)))break;t.kwonlyargs.push(r.arg),t.kw_defaults.push(r.value)}return(n=e.memoAny(yo))&&(t.kwarg=n),t}if(io(e)){var n;t={vararg:null,kwonlyargs:[],kw_defaults:[],kwarg:null};for(e.expectOp("Mult"),e.expectOp("Comma");;){var r;if(!(r=e.memoAny(mo)))break;t.kwonlyargs.push(r.arg),t.kw_defaults.push(r.value)}return(n=e.memoAny(yo))&&(t.kwarg=n),t}return lo(e)?((t={vararg:null,kwonlyargs:[],kw_defaults:[],kwarg:null}).kwarg=e.memoAny(yo),t):null}},po=function(e){return e.detectWrapper((function(){return!(!e.expectOp("Mult")||!e.memoAny(Zr))}))},io=function(e){return e.detectWrapper((function(){return!!(e.expectOp("Mult")&&e.expectOp("Comma")&&e.memoAny(mo))}))},lo=function(e){return e.detectM(yo)},mo={name:"param_maybe_default",func:function(e){if(so(e)){var t=e.memoAny(to),n=e.memoAny(co);return e.expectOp("Comma"),{arg:t,value:n}}return fo(e)?{arg:t=e.memoAny(to),value:n=e.memoAny(co)}:null}},so=function(e){return e.detectWrapper((function(){return!(!e.memoAny(to)||(e.memoAny(co),!e.expectOp("Comma")))}))},fo=function(e){return e.detectWrapper((function(){return!(!e.memoAny(to)||(e.memoAny(co),!e.detectOp("RParen")))}))},yo={name:"kwds",func:function(e){return e.detectWrapper((function(){return e.expectOp("Pow")&&e.memoAny(Zr)}))?(e.expectOp("Pow"),e.memoAny(Zr)):null}},ho={name:"assignment",func:function(t){if(xo(t))return(n=ve()).target=re(t.expectType(e.Id).value,"Store"),t.expectType(e.Op),n.annotation=t.memoAny(Kr),t.expectOp("Assign")&&(n.value=ko.func(t)),n;if(vo(t)){var n=ve();return t.expectOp("LParen")?(n.target=t.memoAny(wo),t.expectOp("RParen")):n.target=t.memoAny(bo),t.expectOp("Colon"),n.annotation=t.memoAny(Kr),t.expectOp("Assign")&&(n.value=ko.func(t)),ne(n.target),n}if(Ao(t)){for(var n={_ty:te.Assign,targets:[],value:null,type_comment:null};t.detectCombineAnd((function(){return t.memoAny(Xt)}),(function(){return t.expectOp("Assign")}));)n.targets.push(t.memoAny(Xt)),t.expectOp("Assign");return t.detectM(gt)?n.value=t.memo(gt):t.detectM(Sr)&&(n.value=t.memo(Sr)),n.targets.forEach((function(e){return ne(e)})),n}return t.detectWrapper((function(){return t.memoAny(wo)&&Co.func(t)}))?((n={_ty:te.AugAssign,target:null,op:null,value:null}).target=t.memoAny(wo),n.op={_ty:Co.func(t)},t.detectM(gt)?n.value=t.memo(gt):t.detectM(Sr)?n.value=t.memo(Sr):t.reportError("有语法错误"),ne(n.target),n):null}},xo=function(t){return t.detectWrapper((function(){return!!(t.expectType(e.Id)&&t.expectOp("Colon")&&t.memoAny(Kr))&&t.expectOption((function(){return t.expectOp("Assign")}),t.memoAny(ko))}))},vo=function(e){return e.detectWrapper((function(){return!(!e.expectWrapper((function(){return e.expectOp("LParen")&&e.memoAny(wo)&&e.expectOp("RParen")}))&&!e.memoAny(bo)||!e.expectOp("Colon")||!e.memoAny(Kr))&&e.expectOption((function(){return e.expectOp("Assign")}),e.memoAny(ko))}))},Ao=function(e){return e.detectWrapper((function(){return!(!e.expectOneMore((function(){return e.memoAny(Xt)}),(function(){return e.expectOp("Assign")}))||!e.memoAny(gt)&&!e.memoAny(Sr)||"Assign"==e.lookahead.LT(1).value)}))},wo={name:"single_target",func:function(t){return t.detectM(bo)?t.memoAny(bo):t.detectType(e.Id)?re(t.expectType(e.Id).value):go(t)?t.memoAny(wo):null}},go=function(e){return e.detectWrapper((function(){return e.expectOp("LParen")&&e.memoAny(wo)&&e.expectOp("RParen")}))},bo={name:"single_subscript_attribute_target",func:function(t){if(Oo(t)){var n=me();n.value=t.memoLeftRec(Gt),t.expectOp("Dot");var r=t.expectType(e.Id);return n.attr=r.value,n}return _o(t),null}},Oo=function(t){return t.detectWrapper((function(){return!(!(t.memoLeftRec(Gt)&&t.expectOp("Dot")&&t.expectType(e.Id))||qt(t))}))},_o=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Gt)&&e.expectOp("LSquare")&&Ft.func(e)&&e.expectOp("RSquare")&&!qt(e)}))},ko={name:"annotated_rhs",func:function(e){return e.detectM(gt)?e.memoAny(gt):e.detectM(Sr)?e.memoAny(Sr):null}},Co={name:"augassign",func:function(e){var t={AddAssign:"Add",SubAssign:"Sub",MultAssign:"Mult",MatMultAssign:"MatMult",DivAssign:"Div",ModAssign:"Mod",BitAndAssign:"BitAnd",BitOrAssign:"BitOr",BitXorAssign:"BitXor",LShiftAssign:"LShift",RShiftAssign:"RShift",PowAssign:"Pow",FloorDivAssign:"FloorDiv"}[e.lookahead.LT(1).value];return t&&e.consume(),t||null}},Lo={name:"import_stmt",func:function(e){return e.detectM(So)?e.memoAny(So):e.detectM(Fo)?e.memoAny(Fo):null}},So={name:"import_name",func:function(e){if(Ro(e)){var t={_ty:j.Import,names:[]};return e.expectKw("import"),t.names=e.memoAny(Wo),t}return null}},Ro=function(e){return e.detectWrapper((function(){return e.expectKw("import")&&!!e.memoAny(Wo)}))},Wo={name:"dotted_as_names",func:function(e){if(Mo(e)){for(var t=[];;){var n=e.memo(To);if(t.push(n),!e.expectOp("Comma"))break}return t}return null}},Mo=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(To)}))}))},To={name:"dotted_as_name",func:function(e){if(Eo(e)){var t=e.memoLeftRec(Po),n=ye(t.name);return e.expectKw("as")&&(n.asname=e.consume().value),n}return null}},Eo=function(t){return t.detectWrapper((function(){return!!t.memoLeftRec(Po)&&(!t.expectKw("as")||!!t.expectType(e.Id))}))},Po={name:"dotted_name",func:function(t){if(Ko(t)){var n=t.memoLeftRec(Po);return t.expectOp("Dot"),ye("".concat(n.name,".").concat(t.expectType(e.Id).value))}return jo(t)?ye(t.expectType(e.Id).value):null}},Ko=function(t){return t.detectWrapper((function(){return t.memoLeftRec(Po)&&t.expectOp("Dot")&&t.expectType(e.Id)}))},jo=function(t){return t.detectType(e.Id)},Fo={name:"import_from",func:function(e){if(No(e)){var t={_ty:j.ImportFrom,module:null,names:[],level:0};e.expectKw("from");for(var n=0;e.expectOp("Dot");)n++;var r=e.memoLeftRec(Po);return t.module=r.name,e.expectKw("import"),t.names=e.memoAny(Io),t}if(Do(e)){t={_ty:j.ImportFrom,module:null,names:[],level:0};e.expectKw("from"),e.expectOp("Dot");for(n=1;e.expectOp("Dot");)n++;return t.level=n,e.expectKw("import"),t.names=e.memoAny(Io),t}return null}},No=function(e){return e.detectWrapper((function(){if(e.expectKw("from")){for(;e.expectOp("Dot"););if(e.memoLeftRec(Po)&&e.expectKw("import")&&e.memoAny(Io))return!0}return!1}))},Do=function(e){return e.detectWrapper((function(){return!!(e.expectKw("from")&&e.expectOneMore((function(){return e.expectOp("Dot")}))&&e.expectKw("import")&&e.memoAny(Io))}))},Io={name:"import_from_targets",func:function(e){return Bo(e)||qo(e)?e.memoAny(zo):Go(e)?[ye("*")]:null}},Bo=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LParen")||!e.memoAny(zo))&&(e.expectOp("Comma"),e.expectOp("RParen"),!0)}))},qo=function(e){return e.detectWrapper((function(){return!(!e.memoAny(zo)||e.expectOp("Comma"))}))},Go=function(e){return e.detectOp("Mult")},zo={name:"import_from_as_names",func:function(e){if(Uo(e)){for(var t=[];;){var n=e.memo(Vo);if(t.push(n),!e.expectOp("Comma"))break}return t}return null}},Uo=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memo(Vo)}))}))},Vo={name:"import_from_as_name",func:function(t){if(Yo(t)){var n=ye(t.expectType(e.Id).value);return t.expectKw("as")&&(n.asname=t.expectType(e.Id).value),n}return null}},Yo=function(t){return t.detectWrapper((function(){if(t.expectType(e.Id))return!t.expectKw("as")||!!t.expectType(e.Id)}))},Ho={name:"raise_stmt",func:function(e){if(Xo(e)){var t={_ty:j.Raise,exc:null,cause:null};return e.expectKw("raise"),t.exc=e.memoAny(Kr),e.expectKw("from")&&(t.cause=e.memoAny(Kr)),t}return e.detectKw("raise")?(e.lookahead.consume(),t={_ty:j.Raise,exc:null,cause:null}):null}},Xo=function(e){return e.detectWrapper((function(){return!(!e.expectKw("raise")||!e.memoAny(Kr))&&(!e.expectKw("from")||e.memoAny(Kr))}))},$o={name:"del_stmt",func:function(e){if(Jo(e)){var t={_ty:j.Delete,targets:[]};return e.expectKw("del"),t.targets=e.memoAny(Zo),t}return null}},Jo=function(t){return t.detectWrapper((function(){return t.expectKw("del")&&t.memoAny(Zo)&&(t.detectOp("Semicolon")||t.detectType(e.NewLine))}))},Zo={name:"del_targets",func:function(e){if(Qo(e)){var t=[];for(t.push(e.memoAny(eu));e.expectOp("Comma");){var n=e.memoAny(eu);n&&t.push(n)}return t}return null}},Qo=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(eu)}))}))},eu={name:"del_target",func:function(e){var t;return tu(e)?((t=me("Del")).value=e.memoLeftRec(Gt),e.expectOp("Dot"),t.attr=e.consume().value,t):nu(e)?((t=le("Del")).value=e.memoLeftRec(Gt),e.expectOp("LSquare"),t.slice=e.memoAny(It),e.expectOp("RSquare"),t):e.detectM(ru)?e.memoAny(ru):null}},tu=function(t){return t.detectWrapper((function(){return t.memoLeftRec(Gt)&&t.expectOp("Dot")&&t.expectType(e.Id)&&!qt(t)}))},nu=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Gt)&&e.expectOp("LSquare")&&e.memoAny(Ft)&&e.expectOp("RSquare")&&!qt(e)}))},ru={name:"del_t_atom",func:function(e){if(ou(e))return re(e.consume().value,"Del");if(uu(e)){e.expectOp("LParen");var t=e.memoAny(eu);return e.expectOp("RParen"),t}var n;return cu(e)?((t=fe()).ctx._ty="Del",e.expectOp("LParen"),(n=e.memoAny(Zo))&&(t.elts=n),e.expectOp("RParen"),t):au(e)?((t=Ae()).ctx._ty="Del",e.expectOp("LSquare"),(n=e.memoAny(Zo))&&(t.elts=n),e.expectOp("RSquare"),t):null}},ou=function(t){return t.detectType(e.Id)},uu=function(e){return e.detectWrapper((function(){return e.expectOp("LParen")&&e.memoAny(eu)&&e.expectOp("RParen")}))},cu=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LParen")||(e.memoAny(Zo),!e.expectOp("RParen")))}))},au=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LSquare")||(e.memoAny(Zo),!e.expectOp("RSquare")))}))},pu={name:"simple_stmts",func:function(t){if(iu(t))return(n=[]).push(t.memo(mu)),t.expectType(e.NewLine),n;if(lu(t)){var n;for((n=[]).push(t.memo(mu));t.expectOp("Semicolon");){var r=t.memo(mu);if(!r)break;n.push(r)}return t.expectType(e.NewLine),n}return null}},iu=function(t){return t.detectWrapper((function(){return t.memo(mu)&&!t.expectOp("Semicolon")&&t.expectType(e.NewLine)}))},lu=function(t){return t.detectWrapper((function(){return!!t.expectSeparated("Semicolon",(function(){return t.memo(mu)}))&&(t.expectOp("Semicolon"),t.expectType(e.NewLine))}))},mu={name:"simple_stmt",func:function(e){return e.detectM(ho)?e.memo(ho):e.detectM(Sr)?ue(e.memo(Sr)):e.detectM(su)?e.memo(su):e.detectM(Lo)?e.memo(Lo):e.detectM(Ho)?e.memo(Ho):e.detectKw("pass")?(e.consume(),fu()):e.detectM($o)?e.memo($o):e.detectM(wt)?e.memo(wt):e.detectM(hu)?e.memo(hu):e.detectKw("break")?(e.consume(),yu()):e.detectKw("continue")?(e.consume(),du()):e.detectM(vu)?e.memo(vu):e.detectM(wu)?e.memo(wu):null}},su={name:"return_stmt",func:function(e){if(e.detectKw("return")){var t={_ty:j.Return,value:null};return e.expectKw("return"),t.value=e.memoAny(Sr),t}return null}},fu=function(){return{_ty:j.Pass}},yu=function(){return{_ty:j.Break}},du=function(){return{_ty:j.Continue}},hu={name:"assert_stmt",func:function(e){if(xu(e)){var t={_ty:j.Assert,test:null,msg:null};return e.expectKw("assert"),t.test=e.memoAny(Kr),e.expectOp("Comma")&&(t.msg=e.memoAny(Kr)),t}return null}},xu=function(e){return e.detectWrapper((function(){return!(!e.expectKw("assert")||!e.memoAny(Kr))&&(!e.expectOp("Comma")||e.memoAny(Kr))}))},vu={name:"global_stmt",func:function(e){if(Au(e)){var t={_ty:j.Global,names:[]};for(e.expectKw("global"),t.names.push(e.consume().value);e.expectOp("Comma");)t.names.push(e.consume().value);return t}return null}},Au=function(t){return t.detectWrapper((function(){return!!t.expectKw("global")&&t.expectSeparated("Comma",(function(){return t.expectType(e.Id)}))}))},wu={name:"nonlocal_stmt",func:function(e){if(gu(e)){var t={_ty:j.Nonlocal,names:[]};for(e.expectKw("nonlocal"),t.names.push(e.consume().value);e.expectOp("Comma");)t.names.push(e.consume().value);return t}return null}},gu=function(t){return t.detectWrapper((function(){return!!t.expectKw("nonlocal")&&t.expectSeparated("Comma",(function(){return t.expectType(e.Id)}))}))},bu={name:"block",func:function(t){if(Ou(t)){t.expectType(e.NewLine),t.expectType(e.Indent);var n=t.memoAny(ia);return t.expectType(e.Dedent),n}return t.detectM(pu)?t.memoAny(pu):null}},Ou=function(t){return t.detectWrapper((function(){if(t.expectType(e.NewLine))return t.expectType(e.Indent)&&t.memoAny(ia)&&t.expectType(e.Dedent)}))},_u={name:"else_block",func:function(e){return ku(e)?(e.expectKw("else"),e.expectOp("Colon"),e.memoAny(bu)):null}},ku=function(e){return e.detectWrapper((function(){return e.expectKw("else")&&e.expectOp("Colon")&&e.memoAny(bu)}))},Cu={name:"function_def",func:function(e){if(Lu(e)){var t=e.memoAny(Fr),n=e.memoAny(Su);return n.decorator_list=t,n}return e.detectM(Su)?e.memoAny(Su):null}},Lu=function(e){return e.detectWrapper((function(){return e.memoAny(Fr)&&e.memoAny(Su)}))},Su={name:"function_def_raw",func:function(e){if(Ru(e)){var t={_ty:j.FunctionDef,name:"",args:null,body:[],decorator_list:[],returns:null,type_comment:null};return e.expectKw("def"),t.name=e.consume().value,e.expectOp("LParen"),t.args=e.memoAny(Dr),e.expectOp("RParen"),e.expectOp("Arrow")&&(t.returns=e.memoAny(Kr)),e.expectOp("Colon"),t.body=e.memoAny(bu),t}if(Wu(e)){t={_ty:j.AsyncFunctionDef,name:"",args:null,body:[],decorator_list:[],returns:null,type_comment:null};return e.expectKw("async"),e.expectKw("def"),t.name=e.consume().value,e.expectOp("LParen"),t.args=e.memoAny(Dr),e.expectOp("RParen"),e.expectOp("Arrow")&&(t.returns=e.memoAny(Kr)),e.expectOp("Colon"),t.body=e.memoAny(bu),t}return null}},Ru=function(t){return t.detectWrapper((function(){return!!(t.expectKw("def")&&t.expectType(e.Id)&&t.expectOp("LParen")&&(t.memoAny(Dr),t.expectOp("RParen")&&t.expectOption((function(){return t.expectOp("Arrow")}),(function(){return t.memoAny(Kr)}))&&t.expectOp("Colon")&&t.memoAny(bu)))}))},Wu=function(t){return t.detectWrapper((function(){return!!(t.expectKw("async")&&t.expectKw("def")&&t.expectType(e.Id)&&t.expectOp("LParen")&&(t.memoAny(Dr),t.expectOp("RParen")&&t.expectOption((function(){return t.expectOp("Arrow")}),(function(){return t.memoAny(Kr)}))&&t.expectOp("Colon")&&t.memoAny(bu)))}))},Mu={name:"if_stmt",func:function(e){if(Tu(e)){var t=se();return e.expectKw("if"),t.test=e.memoAny(xt),e.expectOp("Colon"),t.body=e.memoAny(bu),t.orelse=[e.memoAny(Pu)],t}if(Eu(e)){t=se();e.expectKw("if"),t.test=e.memoAny(xt),e.expectOp("Colon"),t.body=e.memoAny(bu);var n=e.memoAny(Fu);return n&&(t.orelse=n),t}return null}},Tu=function(e){return e.detectWrapper((function(){return e.expectKw("if")&&e.memoAny(xt)&&e.expectOp("Colon")&&e.memoAny(bu)&&e.memoAny(Pu)}))},Eu=function(e){return e.detectWrapper((function(){return e.expectKw("if")&&e.memoAny(xt)&&e.expectOp("Colon")&&e.memoAny(bu)}))},Pu={name:"elif_stmt",func:function(e){if(Ku(e)){var t=se();return e.expectKw("elif"),t.test=e.memoAny(xt),e.expectOp("Colon"),t.body=e.memoAny(bu),t.orelse=[e.memoAny(Pu)],t}if(ju(e)){t=se();e.expectKw("elif"),t.test=e.memoAny(xt),e.expectOp("Colon"),t.body=e.memoAny(bu);var n=e.memoAny(Fu);return n&&(t.orelse=n),t}return null}},Ku=function(e){return e.detectWrapper((function(){return e.expectKw("elif")&&e.memoAny(xt)&&e.expectOp("Colon")&&e.memoAny(bu)&&e.memoAny(Pu)}))},ju=function(e){return e.detectWrapper((function(){return e.expectKw("elif")&&e.memoAny(xt)&&e.expectOp("Colon")&&e.memoAny(bu)}))},Fu={name:"else_block",func:function(e){return Nu(e)?(e.expectKw("else"),e.expectOp("Colon"),e.memoAny(bu)):null}},Nu=function(e){return e.detectWrapper((function(){return e.expectKw("else")&&e.expectOp("Colon")&&e.memoAny(bu)}))},Du={name:"class_def",func:function(e){if(Iu(e)){var t=e.memoAny(Fr),n=e.memoAny(Bu);return n.decorator_list=t,n}return e.detectM(Bu)?e.memoAny(Bu):null}},Iu=function(e){return e.detectWrapper((function(){return e.memoAny(Fr)&&e.memoAny(Bu)}))},Bu={name:"class_def_raw",func:function(e){if(qu(e)){var t={_ty:j.ClassDef,name:"",bases:[],keywords:[],body:[],decorator_list:[]};if(e.expectKw("class"),t.name=e.consume().value,e.expectOp("LParen")){var n=e.memoAny(He);n&&(t.bases=n),e.expectOp("RParen")}return e.expectOp("Colon"),t.body=e.memoAny(bu),t}return null}},qu=function(t){return t.detectWrapper((function(){if(t.expectKw("class")&&t.expectType(e.Id)){if(t.expectOp("LParen")&&(t.memoAny(He),!t.expectOp("RParen")))return!1;if(t.expectOp("Colon")&&t.memoAny(bu))return!0}return!1}))},Gu={name:"with_stmt",func:function(e){if(zu(e)){var t={_ty:j.With,items:[],body:[],type_comment:null};for(e.expectKw("with"),e.expectOp("LParen"),t.items.push(e.memoAny(Hu));e.expectOp("Comma");){if(!(n=e.memoAny(Hu)))break;t.items.push(n)}return e.expectOp("RParen"),e.expectOp("Colon"),t.body=e.memoAny(bu),t}if(Uu(e)){t={_ty:j.With,items:[],body:[],type_comment:null};for(e.expectKw("with"),t.items.push(e.memoAny(Hu));e.expectOp("Comma");)t.items.push(e.memoAny(Hu));return e.expectOp("Colon"),t.body=e.memoAny(bu),t}if(Vu(e)){t={_ty:j.AsyncWith,items:[],body:[],type_comment:null};for(e.expectKw("async"),e.expectKw("with"),e.expectOp("LParen"),t.items.push(e.memoAny(Hu));e.expectOp("Comma");){var n;if(!(n=e.memoAny(Hu)))break;t.items.push(n)}return e.expectOp("RParen"),e.expectOp("Colon"),t.body=e.memoAny(bu),t}if(Yu(e)){t={_ty:j.AsyncWith,items:[],body:[],type_comment:null};for(e.expectKw("async"),e.expectKw("with"),t.items.push(e.memoAny(Hu));e.expectOp("Comma");)t.items.push(e.memoAny(Hu));return e.expectOp("Colon"),t.body=e.memoAny(bu),t}return null}},zu=function(e){return e.detectWrapper((function(){return!!(e.expectKw("with")&&e.expectOp("LParen")&&e.expectSeparated("Comma",(function(){return e.memoAny(Hu)}))&&(e.expectOp("Comma"),e.expectOp("RParen")&&e.expectOp("Colon")&&e.memoAny(bu)))}))},Uu=function(e){return e.detectWrapper((function(){return!!(e.expectKw("with")&&e.expectSeparated("Comma",(function(){return e.memoAny(Hu)}))&&e.expectOp("Colon")&&e.memoAny(bu))}))},Vu=function(e){return e.detectWrapper((function(){return!!(e.expectKw("async")&&e.expectKw("with")&&e.expectOp("LParen")&&e.expectSeparated("Comma",(function(){return e.memoAny(Hu)}))&&(e.expectOp("Comma"),e.expectOp("RParen")&&e.expectOp("Colon")&&e.memoAny(bu)))}))},Yu=function(e){return e.detectWrapper((function(){return!!(e.expectKw("async")&&e.expectKw("with")&&e.expectSeparated("Comma",(function(){return e.memoAny(Hu)}))&&e.expectOp("Colon")&&e.memoAny(bu))}))},Hu={name:"with_item",func:function(e){var t;return Xu(e)?((t={_ty:j.withitem,context_expr:null,optional_vars:null}).context_expr=e.memoAny(Kr),e.expectKw("as"),t.optional_vars=e.memoAny(Zt),t):e.detectM(Kr)?((t={_ty:j.withitem,context_expr:null,optional_vars:null}).context_expr=e.memoAny(Kr),t):null}},Xu=function(e){return e.detectWrapper((function(){return!!(e.memoAny(Kr)&&e.expectKw("as")&&e.memoAny(Zt)&&(e.detectOp("Comma")||e.detectOp("RParen")||e.detectOp("Colon")))}))},$u={name:"for_stmt",func:function(e){var t=!1;if((Ju(e)||e.detectWrapper((function(){return e.expectKw("async")&&Ju(e)})))&&(t=!0),t){var n={_ty:e.expectKw("async")?te.AsyncFor:te.For,target:null,iter:null,body:[],orelse:[],type_comment:null};if(e.expectKw("for"),n.target=e.memoAny(Xt),ne(n.target),e.expectKw("in"),e.detectWrapper((function(){return e.memoAny(Sr)&&e.expectOp("Colon")&&e.memoAny(bu)}))){n.iter=e.memoAny(Sr),e.expectOp("Colon"),n.body=e.memoAny(bu);var r=e.memoAny(_u);r&&(n.orelse=r)}else e.reportError("for语句里有语法错误");return n}return null}},Ju=function(e){return e.detectWrapper((function(){return e.expectKw("for")&&e.memoAny(Xt)&&e.expectKw("in")}))},Zu={name:"try_stmt",func:function(e){if(Qu(e)){var t={_ty:j.Try,body:[],handlers:[],orelse:[],finalbody:[]};return e.expectKw("try"),e.expectOp("Colon"),t.body=e.memoAny(bu),t.finalbody=e.memoAny(tc),t}if(ec(e)){t={_ty:j.Try,body:[],handlers:[],orelse:[],finalbody:[]};for(e.expectKw("try"),e.expectOp("Colon"),t.body=e.memoAny(bu);;){var n=e.memoAny(rc);if(!n)break;t.handlers.push(n)}var r=e.memoAny(_u);r&&(t.orelse=r);var o=e.memoAny(tc);return o&&(t.finalbody=o),t}return null}},Qu=function(e){return e.detectWrapper((function(){return e.expectKw("try")&&e.expectOp("Colon")&&e.memoAny(bu)&&e.memoAny(tc)}))},ec=function(e){return e.detectWrapper((function(){return!!(e.expectKw("try")&&e.expectOp("Colon")&&e.memoAny(bu)&&e.memoAny(rc))}))},tc={name:"finally_block",func:function(e){return nc(e)?(e.expectKw("finally"),e.expectOp("Colon"),e.memoAny(bu)):null}},nc=function(e){return e.detectWrapper((function(){return e.expectKw("finally")&&e.expectOp("Colon")&&e.memoAny(bu)}))},rc={name:"except_block",func:function(e){if(oc(e)){var t={_ty:j.ExceptHandler,type:null,name:null,body:[]};return e.expectKw("except"),t.type=e.memoAny(Kr),e.expectKw("as")&&(t.name=e.consume().value),e.expectOp("Colon"),t.body=e.memoAny(bu),t}if(uc(e)){t={_ty:j.ExceptHandler,type:null,name:null,body:[]};return e.expectKw("except"),e.expectOp("Colon"),t.body=e.memoAny(bu),t}return null}},oc=function(t){return t.detectWrapper((function(){if(t.expectKw("except")&&t.memoAny(Kr)){if(t.expectKw("as")&&!t.expectType(e.Id))return!1;if(t.expectOp("Colon")&&t.memoAny(bu))return!0}return!1}))},uc=function(e){return e.detectWrapper((function(){return e.expectKw("except")&&e.expectOp("Colon")&&e.memoAny(bu)}))},cc={name:"while_stmt",func:function(e){if(ac(e)){var t={_ty:j.While,test:null,body:[],orelse:[]};e.expectKw("while"),t.test=e.memo(xt),e.expectOp("Colon"),t.body=e.memoAny(bu);var n=e.memoAny(_u);return n&&(t.orelse=n),t}return null}},ac=function(e){return e.detectWrapper((function(){return e.expectKw("while")&&e.memoAny(xt)&&e.expectOp("Colon")&&e.memoAny(bu)}))},pc={name:"match_stmt",func:function(t){if(ic(t)){var n={_ty:j.Match,subject:null,cases:[]};for(t.expectKw("match"),n.subject=t.memo(lc),t.expectOp("Colon"),t.expectType(e.NewLine),t.skipTokens(),t.expectType(e.Indent);;){var r=t.memo(sc);if(!r)break;n.cases.push(r)}return t.expectType(e.Dedent),n}return null}},ic=function(t){return t.detectWrapper((function(){return!!(t.expectKw("match")&&t.memoAny(lc)&&t.expectOp("Colon")&&t.expectType(e.NewLine))&&(t.skipTokens(),t.expectType(e.Indent)&&t.expectOneMore((function(){return t.memoAny(sc)}))&&t.expectType(e.Dedent))}))},lc={name:"subject_expr",func:function(e){if(mc(e)){var t=fe();t.elts.push(e.memoAny(yt)),e.expectOp("Comma");var n=e.memoAny(st);return n&&t.elts.push(n),t}return e.detectM(xt)?e.memoAny(xt):null}},mc=function(e){return e.detectWrapper((function(){return e.memoAny(yt)&&e.expectOp("Comma")}))},sc={name:"case_block",func:function(e){if(fc(e)){var t={_ty:j.match_case,pattern:null,guard:null,body:[]};e.expectKw("case"),t.pattern=e.memoAny(yc);var n=e.memoAny(kt);return n&&(t.guard=n),e.expectOp("Colon"),t.body=e.memoAny(bu),t}return null}},fc=function(e){return e.detectWrapper((function(){return!!(e.expectKw("case")&&e.memoAny(yc)&&(e.expectWrapper((function(){return e.memoAny(kt)})),e.expectOp("Colon")&&e.memoAny(bu)))}))},yc={name:"patterns",func:function(e){return e.detectM(dc)?e.memoAny(dc):e.detectM(_c)?e.memoAny(_c):null}},dc={name:"open_sequence_pattern",func:function(e){if(hc(e)){var t=[];return t.push(e.memoAny(xc)),e.expectOp("Comma"),e.memoAny(Oc).forEach((function(e){t.push(e)})),t}return null}},hc=function(e){return e.detectWrapper((function(){return e.memoAny(xc)&&e.expectOp("Comma")}))},xc={name:"maybe_star_pattern",func:function(e){return e.detectM(vc)?e.memoAny(vc):e.detectM(_c)?e.memoAny(_c):null}},vc={name:"star_pattern",func:function(e){return Ac(e)||wc(e),null}},Ac=function(e){return e.detectWrapper((function(){return e.expectOp("Mult")&&e.memoAny(gc)}))},wc=function(e){return e.detectWrapper((function(){return e.expectOp("Mult")&&e.memoAny(Tc)}))},gc={name:"pattern_capture_target",func:function(e){return bc(e)?re(e.consume().value):null}},bc=function(t){return t.detectWrapper((function(){return!("_"==t.lookahead.LT(1).value||!t.expectType(e.Id)||t.detectOp("Dot")||t.detectOp("LParen")||t.detectOp("Assign"))}))},Oc={name:"maybe_sequence_pattern",func:function(e){if(e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memo(xc)}))}))){var t=[];for(t.push(e.memoAny(xc));e.expectOp("Comma");){var n=e.memoAny(xc);if(!n)break;t.push(n)}return t}return null}},_c={name:"pattern",func:function(e){return e.detectM(kc)?e.memoAny(kc):e.detectM(Lc)?e.memoAny(Lc):null}},kc={name:"as_pattern",func:function(e){if(Cc(e)){var t={_ty:j.MatchAs,pattern:null,name:null};return t.pattern=e.memoAny(Lc),e.expectKw("as"),t.name=e.memoAny(gc).id,t}return null}},Cc=function(e){return e.detectWrapper((function(){return e.memoAny(Lc)&&e.expectKw("as")&&e.memoAny(gc)}))},Lc={name:"or_pattern",func:function(e){if(Sc(e)){for(var t=[];;){var n=e.memoAny(Rc);if(!n||(t.push(n),!e.expectOp("BitOr")))break}return 1==t.length?t[0]:{_ty:j.MatchOr,patterns:t}}return null}},Sc=function(e){return e.detectWrapper((function(){if(e.memoAny(Rc)){for(;e.expectOp("BitOr");)if(!e.memoAny(Rc))return!1;return!0}return!1}))},Rc={name:"closed_pattern",func:function(e){return e.detectM(Wc)?e.memoAny(Wc):e.detectM(Mc)?e.memoAny(Mc):e.detectM(Tc)?e.memoAny(Tc):e.detectM(Ec)?e.memoAny(Ec):e.detectM(Kc)?e.memoAny(Kc):e.detectM(Fc)?e.memoAny(Fc):e.detectM(Ic)?e.memoAny(Ic):e.detectM(Jc)?e.memoAny(Jc):null}},Wc={name:"literal_pattern",func:function(e){return e.detectWrapper((function(){return e.memoAny(Ct)&&!e.detectOp("Add")&&!e.detectOp("Sub")}))?{_ty:j.MatchValue,value:e.memoAny(Ct)}:e.detectM(Lt)?{_ty:j.MatchValue,value:e.memoAny(Lt)}:e.detectM(Et)?{_ty:j.MatchValue,value:e.memoAny(Et)}:e.detectKw("None")?{_ty:j.MatchSingleton,value:null}:e.detectKw("True")?{_ty:j.MatchSingleton,value:!0}:e.detectKw("False")?{_ty:j.MatchSingleton,value:!1}:null}},Mc={name:"capture_pattern",func:function(e){return e.detectM(gc)?{_ty:j.MatchAs,pattern:null,name:e.memoAny(gc).id}:null}},Tc={name:"wildcard_pattern",func:function(e){if("_"==e.lookahead.LT(1).value)return e.lookahead.consume(),{_ty:j.MatchAs,pattern:null,name:null}}},Ec={name:"value_pattern",func:function(e){return Pc(e)?{_ty:j.MatchValue,value:e.memoLeftRec(Pt)}:null}},Pc=function(e){return e.detectWrapper((function(){return e.memoLeftRec(Pt)&&!e.detectOp("Dot")&&!e.detectOp("LParen")&&!e.detectOp("Assign")}))},Kc={name:"group_pattern",func:function(e){if(jc(e)){e.expectOp("LParen");var t=e.memoAny(_c);return e.expectOp("RParen"),t}return null}},jc=function(e){return e.detectWrapper((function(){return e.expectOp("LParen")&&e.memoAny(_c)&&e.expectOp("RParen")}))},Fc={name:"sequence_pattern",func:function(e){if(Nc(e)){var t={_ty:j.MatchSequence,patterns:[]};return e.expectOp("LSquare"),(n=e.memoAny(Oc))&&(t.patterns=n),e.expectOp("RSquare"),t}if(Dc(e)){var n;t={_ty:j.MatchSequence,patterns:[]};return e.expectOp("LParen"),(n=e.memoAny(dc))&&(t.patterns=n),e.expectOp("LParen"),t}return null}},Nc=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LSquare")||(e.memoAny(Oc),!e.expectOp("RSquare")))}))},Dc=function(e){return e.detectWrapper((function(){return!(!e.expectOp("LParen")||(e.memoAny(dc),!e.expectOp("RParen")))}))},Ic={name:"mapping_pattern",func:function(e){if(Bc(e))return t={_ty:j.MatchMapping,keys:[],patterns:[],rest:null};if(qc(e)){var t={_ty:j.MatchMapping,keys:[],patterns:[],rest:null};return e.expectOp("LBracket"),t.rest=e.memoAny(Uc).id,e.expectOp("Comma"),e.expectOp("RBracket"),t}if(Gc(e)){var n={_ty:j.MatchMapping,keys:[],patterns:[],rest:null};return e.expectOp("LBracket"),e.memoAny(Yc).forEach((function(e){n.keys.push(e.key),n.patterns.push(e.value)})),e.expectOp("Comma"),n.rest=e.memoAny(Uc).id,e.expectOp("Comma"),e.expectOp("RBracket"),n}if(zc(e)){var r={_ty:j.MatchMapping,keys:[],patterns:[],rest:null};return e.expectOp("LBracket"),e.memoAny(Yc).forEach((function(e){r.keys.push(e.key),r.patterns.push(e.value)})),e.expectOp("Comma"),e.expectOp("RBracket"),r}return null}},Bc=function(e){return e.detectWrapper((function(){return e.expectOp("LBracket")&&e.expectOp("RBracket")}))},qc=function(e){return e.detectWrapper((function(){return!!(e.expectOp("LBracket")&&e.memoAny(Uc)&&(e.expectOp("Comma"),e.expectOp("RBracket")))}))},Gc=function(e){return e.detectWrapper((function(){return!!(e.expectOp("LBracket")&&e.memoAny(Yc)&&e.expectOp("Comma")&&e.memoAny(Uc)&&(e.expectOp("Comma"),e.expectOp("RBracket")))}))},zc=function(e){return e.detectWrapper((function(){return!!(e.expectOp("LBracket")&&e.memoAny(Yc)&&(e.expectOp("Comma"),e.expectOp("RBracket")))}))},Uc={name:"double_star_pattern",func:function(e){return Vc(e)?(e.expectOp("Pow"),e.memoAny(gc)):null}},Vc=function(e){return e.detectWrapper((function(){return e.expectOp("Pow")&&e.memoAny(gc)}))},Yc={name:"items_pattern",func:function(e){if(Hc(e)){var t=[];for(t.push(e.memoAny(Xc));e.expectOp("Comma");)t.push(e.memoAny(Xc));return t}return null}},Hc=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(Xc)}))}))},Xc={name:"key_value_pattern",func:function(e){if($c(e)){var t={key:null,value:null},n=e.memo(_t);return n||(n=e.memoLeftRec(Pt)),t.key=n,e.expectOp("Colon"),t.value=e.memo(_c),t}return null}},$c=function(e){return e.detectWrapper((function(){return!(!e.memoAny(_t)&&!e.memoLeftRec(Pt)||(e.expectOp("Colon"),!e.memoAny(_c)))}))},Jc={name:"class_pattern",func:function(e){var t;if(Zc(e))return(t=xe()).cls=e.memoLeftRec(jt),e.expectOp("LParen"),e.expectOp("RParen"),t;if(Qc(e))return(t=xe()).cls=e.memoLeftRec(jt),e.expectOp("LParen"),t.patterns=e.memoAny(na),e.expectOp("Comma"),e.expectOp("RParen"),t;if(ea(e))return(t=xe()).cls=e.memoLeftRec(jt),e.expectOp("LParen"),t.patterns=e.memoAny(oa),e.expectOp("Comma"),e.expectOp("RParen"),t;if(ta(e)){var n=xe();return n.cls=e.memoLeftRec(jt),e.expectOp("LParen"),n.patterns=e.memoAny(na),e.expectOp("Comma"),e.memoAny(oa).forEach((function(e){n.kwd_attrs.push(e.name),n.kwd_patterns.push(e.pattern)})),e.expectOp("Comma"),e.expectOp("RParen"),n}return null}},Zc=function(e){return e.detectWrapper((function(){return e.memoLeftRec(jt)&&e.expectOp("LParen")&&e.expectOp("RParen")}))},Qc=function(e){return e.detectWrapper((function(){return!!(e.memoLeftRec(jt)&&e.expectOp("LParen")&&e.memoAny(na)&&(e.expectOp("Comma"),e.expectOp("RParen")))}))},ea=function(e){return e.detectWrapper((function(){return!!(e.memoLeftRec(jt)&&e.expectOp("LParen")&&e.memoAny(oa)&&(e.expectOp("Comma"),e.expectOp("RParen")))}))},ta=function(e){return e.detectWrapper((function(){return!!(e.memoLeftRec(jt)&&e.expectOp("LParen")&&e.memoAny(na)&&e.expectOp("Comma")&&e.memoAny(oa)&&(e.expectOp("Comma"),e.expectOp("RParen")))}))},na={name:"positional_patterns",func:function(e){if(ra(e)){var t=[];for(t.push(e.memo(_c));e.expectOp("Comma");)t.push(e.memo(_c));return t}return null}},ra=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memo(_c)}))}))},oa={name:"keyword_patterns",func:function(e){if(ua(e)){var t=[];for(t.push(e.memoAny(ca));e.expectOp("Comma");)t.push(e.memoAny(ca));return t}return null}},ua=function(e){return e.detectWrapper((function(){return e.expectSeparated("Comma",(function(){return e.memoAny(ca)}))}))},ca={name:"keyword_pattern",func:function(e){if(aa(e)){var t={name:null,pattern:null};return t.name=e.consume().value,e.expectOp("Assign"),t.pattern=e.memoAny(_c),t}return null}},aa=function(t){return t.detectWrapper((function(){return t.expectType(e.Id)&&t.expectOp("Assign")&&t.memo(_c)}))},pa={name:"compound_stmt",func:function(e){return e.detectM(Cu)?e.memo(Cu):e.detectM(Mu)?e.memo(Mu):e.detectM(Du)?e.memo(Du):e.detectM(Gu)?e.memo(Gu):e.detectM($u)?e.memo($u):e.detectM(Zu)?e.memo(Zu):e.detectM(cc)?e.memo(cc):e.detectM(pc)?e.memo(pc):null}},ia={name:"statements",func:function(e){if(e.skipTokens(),e.detectM(la)){for(var t=[];;){e.skipTokens();var n=e.memoAny(la);if(!n)break;n instanceof Array?t.push.apply(t,n):t.push(n)}return t}return null}},la={name:"statement",func:function(e){return e.detectM(pa)?e.memo(pa):e.detectM(pu)?e.memoAny(pu):null}},ma=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Y(n,t),n.prototype.parse=function(t){if(0==t.length)return null;this.lookahead.init(t),this.memos.init();var n=ia.func(this);return this.expectType(e.EOF)?function(e){void 0===e&&(e=[]);var t={_ty:te.Module,body:e||[],type_ignores:[]};return e&&e.length>0&&(t.lineno=e[0].lineno,t.end_lineno=e[e.length-1].end_lineno),t}(n):(this.reportError("有语法错误"),null)},n}(ee);!function(e){e[e.Block=0]="Block",e[e.Function=1]="Function",e[e.MemberFunction=2]="MemberFunction",e[e.Class=3]="Class"}(X||(X={}));var sa,fa=function(){function e(e,t,n){void 0===n&&(n=""),this.id="",this.type=0,this.level=0,this.symbols=[],this.children=[],this.type=t,this.id=n,this.parent=e,e&&(e.children.push(this),this.level=e.level+1)}return e.prototype.setPosRange=function(e,t){this.startPos=e,this.endPos=t},e.prototype.lookup=function(e,t){void 0===t&&(t=!1);var n=this.symbols.find((function(t){return t.name==e}));return n||(!t&&this.parent?this.parent.lookup(e,t):null)},e.prototype.replace=function(e,t,n){void 0===n&&(n=!1);var r=this.symbols.findIndex((function(t){return t.name==e}));return r>=0?(this.symbols[r]=t,!0):!(n||!this.parent)&&this.parent.replace(e,t,n)},e.prototype.testHit=function(e){return e.line>=this.startPos.line&&e.line<=this.endPos.line},e.prototype.findClosestScope=function(e){if(this.testHit(e)){for(var t=0;t<this.children.length;t++){var n=this.children[t].findClosestScope(e);if(n)return n}return this}return null},e}(),ya=function(){function e(){}return e.prototype.match=function(e,t,n){var r=[];if(!this.root)return r;var o=this.root.findClosestScope({line:t,column:n});for(o||(o=this.root),console.log("line:".concat(t,", column:").concat(n,", findClosestScope:"),o);o;){for(var u=0;u<o.symbols.length;u++){var c=o.symbols[u];c.position&&c.position.line>t||c.name.startsWith(e)&&r.push(c)}o=o.parent}return P.debug("match params:",e,t,n),P.debug("match result:",r),r},e}();!function(e){e[e.All=0]="All",e[e.First=1]="First",e[e.Second=2]="Second"}(sa||(sa={}));var da,ha=function(){this.scanStep=sa.All};!function(e){e[e.Any=0]="Any",e[e.Number=1]="Number",e[e.Boolean=2]="Boolean",e[e.String=3]="String",e[e.List=4]="List",e[e.Tuple=5]="Tuple",e[e.Dict=6]="Dict",e[e.Set=7]="Set",e[e.Object=8]="Object",e[e.Function=9]="Function",e[e.Class=10]="Class"}(da||(da={}));var xa=["任意类型","Number类型","Boolean类型","String类型","List类型","Tuple类型","Dict类型","Set类型","对象","函数类型","Class类型"],va=function(){function e(e,t){this.builtin=!1,this.name=e,this.type=t}return e.prototype.setPos=function(e,t){this.position={line:e,column:t}},e}(),Aa=function(e){function t(t){return e.call(this,t,da.Any)||this}return Y(t,e),t}(va),wa=function(e){function t(t){return e.call(this,t,da.Number)||this}return Y(t,e),t}(va),ga=function(e){function t(t){return e.call(this,t,da.Boolean)||this}return Y(t,e),t}(va),ba=function(e){function t(t){return e.call(this,t,da.String)||this}return Y(t,e),t}(va),Oa=function(e){function t(t){return e.call(this,t,da.List)||this}return Y(t,e),t}(va),_a=function(e){function t(t){return e.call(this,t,da.Tuple)||this}return Y(t,e),t}(va),ka=function(e){function t(t){return e.call(this,t,da.Dict)||this}return Y(t,e),t}(va),Ca=function(e){function t(t){return e.call(this,t,da.Set)||this}return Y(t,e),t}(va),La=function(e){function t(t,n){var r=e.call(this,t,da.Function)||this;return r.posonlyargs=[],r.args=[],r.vararg=!1,r.kwonlyargs=!1,r.defaultsCount=0,r.returnType=n,r}return Y(t,e),t}(va),Sa=function(e){function t(t){var n=e.call(this,t,da.Class)||this;return n.superCls=[],n.members=new Map,n}return Y(t,e),t.prototype.find=function(e){var t=this.members.get(e);if(!t)for(var n=0;n<this.superCls.length;n++){if(t=this.superCls[n].members.get(e))return t}return t},t.prototype.has=function(e){if(this.members.has(e))return!0;for(var t=0;t<this.superCls.length;t++){if(this.superCls[t].members.has(e))return!0}return!1},t}(va),Ra=function(e){function n(t,n){var r=e.call(this,t,da.Object)||this;return r.protoSymbol=n,r}return Y(n,e),n.prototype.find=function(e){if(this.protoSymbol){if(this.protoSymbol.type==da.Class)return this.protoSymbol.find(e);P.warn("没处理的protoSymbol类型:",this.protoSymbol.type)}else P.warn("protoSymbol值为null");return t(!1,"ObjectSymbol not found attr, name: ".concat(this.name,", attr:").concat(e)),null},n.prototype.has=function(e){if(this.protoSymbol){if(this.protoSymbol.type==da.Class)return this.protoSymbol.has(e);P.warn("没处理的protoSymbol类型:",this.protoSymbol.type)}else P.warn("protoSymbol值为null");return!1},n}(va),Wa=[{type:da.Class,obj:new Sa("ArithmeticError")},{type:da.Class,obj:new Sa("AssertionError")},{type:da.Class,obj:new Sa("AttributeError")},{type:da.Class,obj:new Sa("BaseException")},{type:da.Class,obj:new Sa("BlockingIOError")},{type:da.Class,obj:new Sa("BrokenPipeError")},{type:da.Class,obj:new Sa("BufferError")},{type:da.Class,obj:new Sa("BytesWarning")},{type:da.Class,obj:new Sa("ChildProcessError")},{type:da.Class,obj:new Sa("ConnectionAbortedError")},{type:da.Class,obj:new Sa("ConnectionError")},{type:da.Class,obj:new Sa("ConnectionRefusedError")},{type:da.Class,obj:new Sa("ConnectionResetError")},{type:da.Class,obj:new Sa("DeprecationWarning")},{type:da.Class,obj:new Sa("EOFError")},{type:da.Class,obj:new Sa("EncodingWarning")},{type:da.Class,obj:new Sa("EnvironmentError")},{type:da.Class,obj:new Sa("Exception")},{type:da.Class,obj:new Sa("FileExistsError")},{type:da.Class,obj:new Sa("FileNotFoundError")},{type:da.Class,obj:new Sa("FloatingPointError")},{type:da.Class,obj:new Sa("FutureWarning")},{type:da.Class,obj:new Sa("IOError")},{type:da.Class,obj:new Sa("ImportError")},{type:da.Class,obj:new Sa("IndentationError")},{type:da.Class,obj:new Sa("InterruptedError")},{type:da.Class,obj:new Sa("KeyError")},{type:da.Class,obj:new Sa("KeyboardInterrupt")},{type:da.Class,obj:new Sa("LookupError")},{type:da.Class,obj:new Sa("MemoryError")},{type:da.Class,obj:new Sa("ModuleNotFoundError")},{type:da.Class,obj:new Sa("NameError")},{type:da.Class,obj:new Sa("NotADirectoryError")},{type:da.Class,obj:new Sa("NotImplemented")},{type:da.Class,obj:new Sa("NotImplementedError")},{type:da.Class,obj:new Sa("OSError")},{type:da.Class,obj:new Sa("OverflowError")},{type:da.Class,obj:new Sa("PermissionError")},{type:da.Class,obj:new Sa("ProcessLookupError")},{type:da.Class,obj:new Sa("RecursionError")},{type:da.Class,obj:new Sa("ReferenceError")},{type:da.Class,obj:new Sa("RuntimeError")},{type:da.Class,obj:new Sa("UnboundLocalError")},{type:da.Class,obj:new Sa("UnicodeDecodeError")},{type:da.Class,obj:new Sa("UnicodeEncodeError")},{type:da.Class,obj:new Sa("UnicodeError")},{type:da.Class,obj:new Sa("UnicodeTranslateError")},{type:da.Function,obj:new La("__build_class__",da.Any)},{type:da.Boolean,obj:new ga("__debug__")},{type:da.String,obj:new ba("__doc__")},{type:da.Function,obj:new La("__import__",da.Tuple)},{type:da.String,obj:new ba("__name__")},{type:da.String,obj:new ba("__package__")},{type:da.String,obj:new ba("__spec__")},{type:da.Function,obj:new La("abs",da.Number)},{type:da.Function,obj:new La("all",da.Boolean)},{type:da.Function,obj:new La("ascii",da.String)},{type:da.Function,obj:new La("bin",da.String)},{type:da.Function,obj:new La("bool",da.Boolean)},{type:da.Function,obj:new La("bytearray",da.List)},{type:da.Function,obj:new La("bytes",da.String)},{type:da.Function,obj:new La("callable",da.Boolean)},{type:da.Function,obj:new La("chr",da.Number)},{type:da.Function,obj:new La("classmethod",da.Any)},{type:da.Function,obj:new La("compile",da.Any)},{type:da.Function,obj:new La("complex",da.Any)},{type:da.Function,obj:new La("delattr",da.Any)},{type:da.Function,obj:new La("dict",da.Dict)},{type:da.Function,obj:new La("dir",da.Dict)},{type:da.Function,obj:new La("divmod",da.Tuple)},{type:da.Function,obj:new La("enumerate",da.Any)},{type:da.Function,obj:new La("eval",da.Any)},{type:da.Function,obj:new La("filter",da.Object)},{type:da.Function,obj:new La("float",da.Number)},{type:da.Function,obj:new La("format",da.String)},{type:da.Function,obj:new La("frozenset",da.Any)},{type:da.Function,obj:new La("getattr",da.Any)},{type:da.Function,obj:new La("hasattr",da.Boolean)},{type:da.Function,obj:new La("hash",da.Number)},{type:da.Function,obj:new La("hex",da.String)},{type:da.Function,obj:new La("id",da.Number)},{type:da.Function,obj:new La("input",da.String)},{type:da.Function,obj:new La("int",da.Number)},{type:da.Function,obj:new La("isinstance",da.Boolean)},{type:da.Function,obj:new La("issubclass",da.Boolean)},{type:da.Function,obj:new La("iter",da.Object)},{type:da.Function,obj:new La("len",da.Number)},{type:da.Function,obj:new La("list",da.List)},{type:da.Function,obj:new La("max",da.Number)},{type:da.Function,obj:new La("min",da.Number)},{type:da.Function,obj:new La("next",da.Any)},{type:da.Function,obj:new La("object",da.Any)},{type:da.Function,obj:new La("oct",da.String)},{type:da.Function,obj:new La("open",da.Any)},{type:da.Function,obj:new La("ord",da.Number)},{type:da.Function,obj:new La("pow",da.Number)},{type:da.Function,obj:new La("print",da.Any)},{type:da.Function,obj:new La("property",da.Any)},{type:da.Function,obj:new La("range",da.Any)},{type:da.Function,obj:new La("repr",da.String)},{type:da.Function,obj:new La("reversed",da.Any)},{type:da.Function,obj:new La("round",da.Number)},{type:da.Function,obj:new La("set",da.Set)},{type:da.Function,obj:new La("setattr",da.Any)},{type:da.Function,obj:new La("slice",da.Object)},{type:da.Function,obj:new La("sorted",da.List)},{type:da.Function,obj:new La("staticmethod",da.Any)},{type:da.Function,obj:new La("str",da.String)},{type:da.Function,obj:new La("sum",da.Number)},{type:da.Function,obj:new La("super",da.Any)},{type:da.Function,obj:new La("tuple",da.Any)},{type:da.Function,obj:new La("type",da.Any)},{type:da.Function,obj:new La("zip",da.Object)}];function Ma(e,t,n){var r=new La(t,n);r.builtin=!0,e.members.set(t,r)}var Ta=new Sa("os");Ma(Ta,"getpid",da.Number),Ma(Ta,"environ",da.Any),Ma(Ta,"path",da.Any),Ma(Ta,"remove",da.Any),Ma(Ta,"makedirs",da.Any),Ma(Ta,"popen",da.Any),Ma(Ta,"popen",da.Any);var Ea=new Sa("sys");Ea.builtin=!0,Ma(Ea,"setdefaultencoding",da.Any),Ea.members.set("argv",new Oa("argv"));var Pa=new Sa("math");Pa.builtin=!0,Ma(Pa,"acos",da.Number),Ma(Pa,"asin",da.Number),Ma(Pa,"atan",da.Number),Ma(Pa,"atan2",da.Number),Ma(Pa,"ceil",da.Number),Ma(Pa,"cos",da.Number),Ma(Pa,"degrees",da.Number),Ma(Pa,"exp",da.Number),Ma(Pa,"fabs",da.Number),Ma(Pa,"floor",da.Number),Ma(Pa,"fmod",da.Number),Ma(Pa,"log",da.Number),Ma(Pa,"log10",da.Number),Ma(Pa,"log1p",da.Number),Ma(Pa,"log2",da.Number),Ma(Pa,"pow",da.Number),Ma(Pa,"radians",da.Number),Ma(Pa,"sin",da.Number),Ma(Pa,"sqrt",da.Number),Ma(Pa,"tan",da.Number),Ma(Pa,"trunc",da.Number);var Ka=new Sa("random");Ka.builtin=!0,Ma(Ka,"randint",da.Number),Ma(Ka,"random",da.Number),Ma(Ka,"seed",da.Any),Ma(Ka,"shuffle",da.Any),Ma(Ka,"choice",da.Any),Ma(Ka,"uniform",da.Any),Ma(Ka,"randrange",da.Any),Ma(Ka,"sample",da.Any),Ma(Ka,"choices",da.List);var ja=new Sa("time");ja.builtin=!0,Ma(ja,"ctime",da.Number),Ma(ja,"gmtime",da.Number),Ma(ja,"localtime",da.Any),Ma(ja,"mktime",da.Number),Ma(ja,"time",da.Number),Ma(ja,"sleep",da.Number),Ma(ja,"strftime",da.String),Ma(ja,"strptime",da.Any);var Fa=new Sa("datetime");Fa.builtin=!0,Ma(Fa,"now",da.Any),Ma(Fa,"date",da.Any),Ma(Fa,"datetime",da.Any),Ma(Fa,"timedelta",da.Any),Ma(Fa,"time",da.Any),Ma(Fa,"datetime",da.Any);var Na=new Sa("calendar");Na.builtin=!0,Ma(Na,"isleap",da.Any),Ma(Na,"leapdays",da.Any),Ma(Na,"weekday",da.Any),Ma(Na,"monthrange",da.Any);var Da=new(function(){function e(){this.builtins=new Map,this.libraryNames=new Set(["os","sys","math","random","time","datetime","calendar"]),this.librarys=new Map,this.init()}return e.prototype.init=function(){var e=this;this.builtins.clear(),Wa.forEach((function(t){t.obj.builtin=!0,e.builtins.set(t.obj.name,t.obj)})),this.librarys.clear(),this.librarys.set("os",Ta),this.librarys.set("sys",Ea),this.librarys.set("math",Pa),this.librarys.set("random",Ka),this.librarys.set("time",ja),this.librarys.set("datetime",Fa),this.librarys.set("calendar",Na)},e.prototype.lookup=function(e){var t=this.builtins.get(e);return t||this.librarys.get(e)},e.prototype.hasLibrary=function(e){return this.libraryNames.has(e)},e}()),Ia=function(e,t,n,r){if("Add"===n){if(!(e!=da.Number&&e!=da.String&&e!=da.Any||t!=da.Number&&t!=da.String&&t!=da.Any))return e==da.Any||t==da.Any?da.Any:Math.max(e,t);if(!(e!=da.List&&e!=da.Any||t!=da.List&&t!=da.Any))return e==da.Any||t==da.Any?da.Any:e;f.addSemantic("".concat(xa[e],"与").concat(xa[t],"不能做加法操作"),r.lineno,r.col_offset)}else{if(!(e!=da.Number&&e!=da.Any||t!=da.Number&&t!=da.Any))return e==da.Any||t==da.Any?da.Any:e;f.addSemantic("".concat(xa[e],"与").concat(xa[t],"不能做").concat(r.op._ty,"操作"),r.lineno,r.col_offset)}return da.Any},Ba=function(){function e(){}return e.prototype.visit=function(e,t,n){},e}(),qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.body.forEach((function(e){return ei(e,t,n)}))},t}(Ba),Ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.value,t,n)},t}(Ba),za=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=da.Any;return n.loadSymbol=null,"string"==typeof e.value?n.loadType=da.String:"number"==typeof e.value?n.loadType=da.Number:"boolean"==typeof e.value&&(n.loadType=da.Boolean),r},t}(Ba),Ua=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=ti(t,e.id);if("Store"==e.ctx._ty)if(r)n.loadSymbol=r,n.loadType=r.type,n.storeSymbol=r;else{var o=new Aa(e.id);t.symbols.push(o),n.storeSymbol=o}else"Load"==e.ctx._ty?r?(n.loadSymbol=r,n.loadType=r.type):f.addSemantic("'".concat(e.id,"'未定义"),e.lineno,e.col_offset):r||f.addSemantic("'".concat(e.id,"'未定义"),e.lineno,e.col_offset)},t}(Ba),Va=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.elts.forEach((function(e){return ei(e,t,null)})),"Load"==e.ctx._ty&&(n.loadSymbol=null,n.loadType=da.List)},t}(Ba),Ya=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.generators.forEach((function(e){return ei(e,t,null)})),ei(e.elt,t,null),n.loadSymbol=null,n.loadType=da.List},t}(Ba),Ha=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.keys.forEach((function(e){return ei(e,t,null)})),e.values.forEach((function(e){return ei(e,t,null)})),n.loadSymbol=null,n.loadType=da.Dict},t}(Ba),Xa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.key,t,null),ei(e.value,t,null),n.loadSymbol=null,n.loadType=da.Dict},t}(Ba),$a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.elts.forEach((function(e){return ei(e,t,null)})),n.loadSymbol=null,n.loadType=da.Set},t}(Ba),Ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.generators.forEach((function(e){return ei(e,t,null)})),ei(e.elt,t,null),n.loadSymbol=null,n.loadType=da.Set},t}(Ba),Za=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.elts.forEach((function(e){return ei(e,t,null)})),"Load"==e.ctx._ty&&(n.loadSymbol=null,n.loadType=da.Tuple)},t}(Ba),Qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.lower,t,null),ei(e.upper,t,null),ei(e.step,t,null),n.loadSymbol=null,n.loadType=da.List},t}(Ba),ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=new ha;ei(e.value,t,r);var o=r.loadType;e.targets.forEach((function(e){if(ei(e,t,r),r.storeSymbol){if(r.storeSymbol.type==da.Any){var n=r.storeSymbol.name,u=null;switch(o){case da.Any:break;case da.Number:u=new wa(n);break;case da.Boolean:u=new ga(n);break;case da.String:u=new ba(n);break;case da.List:u=new Oa(n);break;case da.Tuple:u=new _a(n);break;case da.Dict:u=new ka(n);break;case da.Set:u=new Ca(n);break;case da.Object:var c=ti(t,r.loadSymbol.name);u=new Ra(n,c);break;case da.Function:u=new La(n,da.Any);break;case da.Class:u=new Sa(n)}u&&t.replace(r.storeSymbol.name,u)}r.storeSymbol.type=o}}))},t}(Ba),tp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.target,t,null),ei(e.annotation,t,null),ei(e.value,t,null)},t}(Ba),np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=new ha;ei(e.target,t,r);var o=r.loadType;ei(e.value,t,r);var u=r.loadType;n.loadType=Ia(o,u,e.op._ty,e)},t}(Ba),rp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.left,t,n),e.comparators.forEach((function(e){return ei(e,t,n)}))},t}(Ba),op=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=new ha;ei(e.left,t,r);var o=r.loadType;ei(e.right,t,r);var u=r.loadType;n.loadType=Ia(o,u,e.op._ty,e)},t}(Ba),up=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.operand,t,null),n.loadType="Not"==e.op._ty?da.Boolean:da.Number},t}(Ba),cp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.values.forEach((function(e){return ei(e,t,null)})),n.loadType=da.Boolean},t}(Ba),ap=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.value,t,null),ei(e.slice,t,null)},t}(Ba),pp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=new ha;if((ei(e.value,t,r),r.loadSymbol)&&((r.loadType==da.Object||r.loadType==da.Class)&&!r.loadSymbol.has(e.attr)))return void f.addSemantic("属性".concat(e.attr,"不存在"),e.lineno,e.col_offset);if("Load"==e.ctx._ty&&(r.loadType==da.Object||r.loadType==da.Class)){var o=r.loadSymbol.find(e.attr);n.loadSymbol=o,o.type==da.Function?n.loadType=o.returnType:n.loadType=o.type}},t}(Ba),ip=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=new ha;if(ei(e.func,t,r),r.loadSymbol)if(r.loadType==da.Function){n.loadSymbol=r.loadSymbol,n.loadType=r.loadSymbol.returnType;var o=e.func.id,u=ti(t,o);if(!u)return void f.addSemantic("找不到函数名'".concat(o,"'"),e.func.lineno,e.func.col_offset);if(e.args)for(var c=0,a=e.args;c<a.length;c++){var p=a[c];if(p._ty==j.Name){var i=p.id;if(!ti(t,i))return void f.addSemantic("找不到符号'".concat(i,"'"),p.lineno,p.col_offset)}}if(!u.builtin){var l=e.args?e.args.length:0;if(!u.vararg&&!u.kwonlyargs){if(l-u.posonlyargs.length<0)return void f.addSemantic("传入的参数数量不对",e.lineno,e.col_offset);var m=l+e.keywords.length;if(m<u.posonlyargs.length+u.args.length-u.defaultsCount)return void f.addSemantic("传入的参数数量太少",e.lineno,e.col_offset);if(m>u.posonlyargs.length+u.args.length)return void f.addSemantic("传入的参数数量过多",e.lineno,e.col_offset)}}}else r.loadType==da.Class?(n.loadSymbol=r.loadSymbol,n.loadType=da.Object):n.loadType=r.loadType;e.keywords.forEach((function(e){return ei(e,t,r)}))},t}(Ba),lp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){},t}(Ba),mp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.args.forEach((function(e){t.type==X.MemberFunction&&"self"==e.arg||ei(e,t,null)})),e.posonlyargs.forEach((function(e){return ei(e,t,null)})),ei(e.vararg,t,null),e.kwonlyargs.forEach((function(e){return ei(e,t,null)})),ei(e.kwarg,t,null)},t}(Ba),sp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Y(n,e),n.prototype.visit=function(e,n,r){var o=null;if("self"==e.arg){var u=ti(n,e.arg);t(!!u,"找不到self的定义"),o=u}else o=new Aa(e.arg);n.symbols.push(o)},n}(Ba),fp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.targets.forEach((function(e){return ei(e,t,null)}))},t}(Ba),yp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.value,t,null)},t}(Ba),dp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.names.forEach((function(n){t.lookup(n)||f.addSemantic("找不到变量".concat(n),e.lineno,e.col_offset)}))},t}(Ba),hp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.names.forEach((function(n){t.lookup(n)||f.addSemantic("找不到变量".concat(n),e.lineno,e.col_offset)}))},t}(Ba),xp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.test,t,null),e.body.forEach((function(e){return ei(e,t,null)})),e.orelse.forEach((function(e){return ei(e,t,null)}))},t}(Ba),vp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.test,t,null),ei(e.body,t,null),ei(e.orelse,t,null)},t}(Ba),Ap=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.target,t,null),ei(e.iter,t,null),e.body.forEach((function(e){return ei(e,t,null)})),e.orelse.forEach((function(e){return ei(e,t,null)}))},t}(Ba),wp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.target,t,null),ei(e.iter,t,null),e.body.forEach((function(e){return ei(e,t,null)})),e.orelse.forEach((function(e){return ei(e,t,null)}))},t}(Ba),gp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.test,t,null),e.body.forEach((function(e){return ei(e,t,null)})),e.orelse.forEach((function(e){return ei(e,t,null)}))},t}(Ba),bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=da.Any;if(e.value){var o=new ha;ei(e.value,t,o),r=o.loadType}n.returnType=r},t}(Ba),Op=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.value,t,null)},t}(Ba),_p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.value,t,null)},t}(Ba),kp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.value,t,null)},t}(Ba),Cp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.target,t,null),ei(e.value,t,null)},t}(Ba),Lp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.names.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Sp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.names.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Rp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){Da.hasLibrary(e.name)||f.addSemantic("找不到".concat(e.name,"库"),e.lineno,e.col_offset)},t}(Ba),Wp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.target,t,null),ei(e.iter,t,null),e.ifs.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Mp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.elt,t,null),e.generators.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Tp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Y(n,e),n.prototype.visit=function(e,n,r){var o=n.lookup(e.name,!0);if(r.scanStep==sa.All){if(o)return void f.addSemantic("函数名'".concat(e.name,"'重复使用"),e.lineno,e.col_offset);o=new La(e.name,da.Any),n.symbols.push(o);var u=n.type==X.Class?X.MemberFunction:X.Function,c=new fa(n,u,e.name);c.setPosRange({line:e.lineno,column:e.col_offset},{line:e.end_lineno,column:e.end_col_offset});var a=new ha;e.args&&(e.args.posonlyargs.forEach((function(e){ei(e,c,a),o.posonlyargs.push(da.Any)})),e.args.args.forEach((function(e){ei(e,c,a),o.args.push(da.Any)})),e.args.vararg&&(ei(e.args.vararg,c,a),o.vararg=!0),e.args.kwonlyargs.forEach((function(e){ei(e,c,a),o.kwonlyargs=!0})),o.defaultsCount=e.args.defaults.length),e.body.forEach((function(e){return ei(e,c,a)})),null!=a.returnType&&(o.returnType=a.returnType)}else if(r.scanStep==sa.First){if(o)return void f.addSemantic("函数名'".concat(e.name,"'重复使用"),e.lineno,e.col_offset);o=new La(e.name,da.Any),n.symbols.push(o)}else if(r.scanStep==sa.Second){t(!!o,"二次扫描时候发现funcSymbol不存在");u=n.type==X.Class?X.MemberFunction:X.Function;var p=new fa(n,u,e.name);p.setPosRange({line:e.lineno,column:e.col_offset},{line:e.end_lineno,column:e.end_col_offset});var i=new ha;e.args&&(e.args.posonlyargs.forEach((function(e){ei(e,p,i),o.posonlyargs.push(da.Any)})),e.args.args.forEach((function(e){ei(e,p,i),o.args.push(da.Any)})),e.args.vararg&&(ei(e.args.vararg,p,i),o.vararg=!0),e.args.kwonlyargs.forEach((function(e){ei(e,p,i),o.kwonlyargs=!0})),o.defaultsCount=e.args.defaults.length),e.body.forEach((function(e){return ei(e,p,i)})),null!=i.returnType&&(o.returnType=i.returnType)}},n}(Ba),Ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=new La(e.name,da.Any);t.symbols.push(r);var o=new fa(t,X.Function,e.name);o.setPosRange({line:e.lineno,column:e.col_offset},{line:e.end_lineno,column:e.end_col_offset});var u=new ha;ei(e.args,o,u),e.body.forEach((function(e){return ei(e,o,u)})),r.returnType=u.returnType},t}(Ba),Pp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){var r=new Sa(e.name);t.symbols.push(r);var o=new fa(t,X.Class,e.name);o.setPosRange({line:e.lineno,column:e.col_offset},{line:e.end_lineno,column:e.end_col_offset}),e.bases.forEach((function(e){if(e._ty==j.Name){var n=e.id,o=ti(t,n);o?r.superCls.push(o):f.addSemantic("找不到父类:'".concat(n,"'"),e.lineno,e.col_offset)}})),o.symbols.push(new Ra("self",r));var u=new ha;u.scanStep=sa.First,e.body.forEach((function(e){ei(e,o,u)})),o.symbols.forEach((function(e){"self"!=e.name&&r.members.set(e.name,e)})),u.scanStep=sa.Second,e.body.forEach((function(e){ei(e,o,u)})),o.symbols.forEach((function(e){"self"!=e.name&&r.members.set(e.name,e)}))},t}(Ba),Kp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.items.forEach((function(e){return ei(e,t,null)})),e.body.forEach((function(e){return ei(e,t,null)}))},t}(Ba),jp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.context_expr,t,null),ei(e.optional_vars,t,null)},t}(Ba),Fp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.items.forEach((function(e){return ei(e,t,null)})),e.body.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.body.forEach((function(e){return ei(e,t,null)})),e.handlers.forEach((function(e){return ei(e,t,null)})),e.orelse.forEach((function(e){return ei(e,t,null)})),e.finalbody.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Dp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.type,t,null),e.body.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Ip=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.exc,t,null),ei(e.cause,t,null)},t}(Ba),Bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.test,t,null),ei(e.msg,t,null)},t}(Ba),qp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.subject,t,null),e.cases.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Gp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.pattern,t,null),e.body.forEach((function(e){return ei(e,t,null)}))},t}(Ba),zp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.value,t,null)},t}(Ba),Up=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.pattern,t,null)},t}(Ba),Vp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.patterns.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Yp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){},t}(Ba),Hp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.patterns.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Xp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){},t}(Ba),$p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){e.keys.forEach((function(e){return ei(e,t,null)})),e.patterns.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Jp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.cls,t,null),e.patterns.forEach((function(e){return ei(e,t,null)})),e.kwd_patterns.forEach((function(e){return ei(e,t,null)}))},t}(Ba),Zp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.visit=function(e,t,n){ei(e.args,t,null),ei(e.body,t,null)},t}(Ba),Qp={Module:new qa,Expr:new Ga,Constant:new za,Name:new Ua,List:new Va,ListComp:new Ya,Dict:new Ha,DictComp:new Xa,Set:new $a,SetComp:new Ja,Tuple:new Za,Slice:new Qa,Assign:new ep,AnnAssign:new tp,AugAssign:new np,Compare:new rp,BinOp:new op,UnaryOp:new up,BoolOp:new cp,Subscript:new ap,Attribute:new pp,Call:new ip,keyword:new lp,arguments:new mp,arg:new sp,Delete:new fp,Starred:new yp,Global:new dp,Nonlocal:new hp,If:new xp,IfExp:new vp,For:new Ap,AsyncFor:new wp,While:new gp,Continue:new Ba,Break:new Ba,Pass:new Ba,Return:new bp,Await:new Op,Yield:new _p,YieldFrom:new kp,NamedExpr:new Cp,Import:new Lp,ImportFrom:new Sp,alias:new Rp,comprehension:new Wp,GeneratorExp:new Mp,FunctionDef:new Tp,AsyncFunctionDef:new Ep,ClassDef:new Pp,With:new Kp,withitem:new jp,AsyncWith:new Fp,Try:new Np,ExceptHandler:new Dp,Raise:new Ip,Assert:new Bp,Match:new qp,match_case:new Gp,MatchValue:new zp,MatchAs:new Up,MatchSequence:new Vp,MatchSingleton:new Yp,MatchOr:new Hp,MatchStar:new Xp,MatchMapping:new $p,MatchClass:new Jp,Lambda:new Zp},ei=function(e,t,n){if(e){var r=Qp[e._ty];r?(n||(n=new ha),r.visit(e,t,n)):P.debug("没找到visotor:".concat(e._ty))}},ti=function(e,t){var n=e.lookup(t);return n||Da.lookup(t)},ni=function(){function e(){this.symbolTable=null,this.symbolTable=new ya}return e.prototype.reset=function(){this.symbolTable.root=null},e.prototype.analyze=function(e){var t=new fa(null,X.Block,"");t.setPosRange({line:e.lineno,column:e.col_offset},{line:e.end_lineno,column:e.end_col_offset}),this.symbolTable.root=t,ei(e,t,new ha),P.debug("SymbolTable root:",this.symbolTable.root)},e}(),ri=function(){function e(){this.lexer=new U,this.parser=new ma,this.semanticAnalyzer=new ni,console.log("%cPC.js v".concat("1.1.0"," %chttps://github.com/zhenyonghou/py-lang"),"background-color: #e0005a; color: #ffffff; font-weight: bold; padding: 4px;","background-color: #333; color: #000; padding: 4px;")}return e.prototype.reset=function(){this.lexer.reset(),this.parser.reset(),this.semanticAnalyzer.reset()},e.prototype.parse=function(e){f.clear();var t=this.lexer.lex(e),n=this.parser.parse(t);return P.debug("ast:",n),n&&this.semanticAnalyzer.analyze(n),n},e.prototype.getSymbolTable=function(){return this.semanticAnalyzer.symbolTable},e.prototype.hasError=function(){return!f.isEmpty()},e.prototype.dumpError=function(){return f.flatten()},e.prototype.stringify=function(){return f.stringify()},e}();module.exports=ri;
